import {
  Meta,
  Title,
  Primary,
  Controls,
  Stories,
  Source,
  Unstyled,
} from "@storybook/addon-docs/blocks";

<Meta isTemplate title="How to use Cards" />

<Title />
適用 : 資訊面板的資料呈現
<div className="sb-unstyled alert-msg">
  <span>卡片元件的呈現方式可能會有多種變化，這邊僅先以基礎**資訊面板**(BasicInfoCard)作為示意說明</span>
</div>

<Primary />

# Controls
卡片元件設定較為複雜，Controls區塊包含初始化時可設定的相關參數(title, cardSize)及資料設定之參數細節(infoList)。

<Controls />

---

# Usage API

初始化 BasicInfoCard 元件，帶入 `title`、`infoList`及`cardSize`參數。

```javascript
new BasicInfoCard(title, infoList, cardSize = 1);
```

> ### parameters 參數設定

- <span className="sb-unstyled font-black">title</span>
  <span className="sb-unstyled data-type str">string</span>

  傳入卡片面版的標題文字
  <br/>

- <span className="sb-unstyled font-black">infoList</span>
  <span className="sb-unstyled data-type arr">array</span>

  各屬性的型別及說明可參考上方Controls區塊；每個`{}`都是一個 row 區塊，排列組成完整資訊面板。


  ```javascript
  const infoList = [{
    blockId: "default", //區塊指定id
    blockclass: ["flex","gap-4"], //tailwindcss 樣式
    label: "", //資料標題文字
    value: "", //資料內容
    customInner: `<div class="container"></div>`, //直接放入innerHTML或是帶入其他HTMLElement的容器
    btn: [ //按鈕清單，每個{}視為一個btn資料
      {
        text:"", //按鈕文字
        class:[], //按鈕樣式(預設已經帶入.btn)
        handler:null //click事件函式
      }
    ],
    btngroupClass: "flex-col gap-[4px]",//按鈕群組樣式(string)
  }];
  ```  
  <br />  
    <div className="sb-unstyled note-msg">
    <span>label 及 value 屬性傳入型別說明</span>
    <p>原則上一個`{}`內的屬性會視為同一欄(row)，如果要在同一個row顯示多組資料，可以在`label`及`value`屬性帶入array型別的資料。(但上方control處先以單一資料呈現操作)</p>
    <p>需要注意的是，如果`label`傳入一陣列，那`value`也需要傳入陣列，如果對應資料尚未知，可以先放入`" "`作為替代；然而如果沒有帶入`value`，但是有`customInner`，則預設會直接把 label & customInner 視為同一組。</p>  
    <br/>
    <div className="examples">
      - <span className="sb-unstyled examples-title">label:"A", value:"B"</span>
    </div>
    <div className="examples">
      - <span className="sb-unstyled examples-title">label:["A", "B"], value:["a", "b"]</span>  
    </div>
    <div className="examples">
      - <span className="sb-unstyled examples-title">label:["A", "B"], value:["a", " "]</span>  
    </div>
    <div className="examples">
      - <span className="sb-unstyled examples-title">label:"A", customInner:`<div></div>`</span>  
    </div>
  </div>

  <br/>

- <span className="sb-unstyled font-black">cardSize</span>
  <span className="sb-unstyled data-type num">number</span>  
  卡片尺寸大小，預設為1(最小)，也可以設定為2或3(全滿)的尺寸。  

<br />

> ### properties 內部屬性 
> <span className="sb-unstyled data-type readonly">Read-only</span><span className="sb-unstyled">可以操作的屬性皆須使用methods來更改</span>

<div className="sb-unstyled table-container overflow-hidden">
  <table className="sb-unstyled table-content">
    <thead>
      <tr className="text-center">
        <td>property</td>
        <td>default</td>
        <td>type</td>
        <td>descriptions</td>
        <td>inherit</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td className="font-bold">UItype</td>
        <td>Card</td>
        <td>string</td>
        <td>繼承自`BaseComponent`的屬性，代表該元件名稱</td>
        <td>`Card` 類別</td>
      </tr>
      <tr>
        <td className="font-bold">cardContainer</td>
        <td>-</td>
        <td>HTMLElement</td>
        <td>當前顯示的圖示，`style`為toggle時才會出現</td>
        <td>`Card` 類別</td>
      </tr>
      <tr>
        <td className="font-bold">title</td>
        <td>-</td>
        <td>string</td>
        <td>卡片標題(Header)</td>
        <td>`Card` 類別</td>
      </tr>
      <tr>
        <td className="font-bold">blocks</td>
        <td>[]</td>
        <td>array</td>
        <td>記錄此卡片內所有內容區塊</td>
      </tr>
      <tr>
        <td className="font-bold">infoList</td>
        <td>[]</td>
        <td>array</td>
        <td>各區塊資料設定</td>
      </tr>
    </tbody>
  </table>
</div>

<br/>

> ### methods 方法
> 提供外部控制方法調整內部屬性值
  
    <p className="sb-unstyled font-bold text-yellow-500">Quick reference</p>

    <div className="sb-unstyled table-container overflow-hidden">
      <table className="sb-unstyled table-content">
        <thead>
          <tr className="text-center">
            <td>methods</td><td>descriptions</td>
          </tr>
        </thead>
        <tbody>
          <tr><td>`.addBlocks(addInfo, options = {})`</td><td>新增項目or欄位</td></tr>
          <tr><td>`.clearBlocks()`</td><td>清空dataContent</td></tr>
          <tr><td>`.deleteBlock(label)`</td><td>刪除單一欄位UI&對應資料</td></tr>
          <tr><td>`.toggleBlock(groupId)`</td><td>切換區塊visible</td></tr>
          <tr><td>`.updateLabel(labelStr,updateStr)`</td><td>替換指定label的值</td></tr>
        </tbody>
      </table>
    </div>

<span className="sb-unstyled methods">.addBlocks(addInfo, options)</span>
 - **Parameters**  
    - <span className="sb-unstyled font-black">addInfo</span>
      <span className="sb-unstyled data-type arr">array</span>  
      要加入的資訊區塊設定，等同於 `infoList` 參數設定  
        
    - <span className="sb-unstyled font-black">options</span>
      <span className="sb-unstyled data-type">object</span>  
      onceSetting，是否只新增一次，其他時候則用替換方式取代原內容。  

      - **`once`** 是否只新增一次
      - **`id`** 當once設定為true時，必須給定id作為groupId  

  ```javascript
    BasicInfoCard.addBlocks(buildno, { once: true, id:"buildno_1" });
  ```
<br/>
<span className="sb-unstyled methods">.clearBlocks()</span>
 - **清空dataContent(僅清空blocks節點，資料仍留存)**  

``` javascript
 BasicInfoCard.clearBlocks(); 
```

<span className="sb-unstyled methods">.deleteBlock(label)</span>
 - **Parameters**  
 傳入欄位文字來刪除單一欄位UI&對應資料
 <span className="sb-unstyled alert-msg">須注意是針對單一欄位來做刪除(要有label)!</span>

``` javascript 
 BasicInfoCard.deleteBlock("資料欄位A"); 
```
<span className="sb-unstyled methods">.toggleBlock()</span>
 - **parameters**  
 可以切換同一個card內的group(有點類似tab)；使用`addBlock({once})`後會綁定內部屬性`_groupId`，可以用來切換
``` javascript
BasicInfoCard.toggleBlock("buildno_1");
```  
<span className="sb-unstyled methods">.updateLabel(label,updateValue)</span>
 - **Parameters**  
    - <span className="sb-unstyled font-black">label</span>
      <span className="sb-unstyled data-type str">string</span>  
      指定的`label`文字 
        
    - <span className="sb-unstyled font-black">updateValue</span>
      <span className="sb-unstyled data-type str">string</span>  
      要替換的新value

 傳入一個指定的`label`文字，會去替換掉對應的`value`
``` javascript
BasicInfoCard.updateLabel("資料欄位A :","更新A");
```  
---  

# Inherits  
<div className="sb-unstyled alert-msg">做為`Card`類別的子類別之一，繼承其相關屬性；但資料部分則涉及 `Info` 類別，詳細請見個別說明。</div>  

> ### Card 類別

  - #### parameters 參數設定
    - <span className="sb-unstyled font-black">title</span>
      <span className="sb-unstyled data-type str">string</span>  
      卡片標題名稱(Header部分)

    - <span className="sb-unstyled font-black">cardSize</span>
      <span className="sb-unstyled data-type num">number</span>  

      卡片尺寸設定，由小到大分別為1、2、3 
    <br/>
  - #### properties 內部屬性
    <div className="sb-unstyled table-container overflow-hidden">
      <table className="sb-unstyled table-content">
        <thead>
          <tr className="text-center">
            <td>property</td>
            <td>default</td>
            <td>type</td>
            <td>descriptions</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td className="font-bold">UItype</td>
            <td>Card</td>
            <td>string</td>
            <td>繼承自`BaseComponent`的屬性，代表該元件名稱</td>
          </tr>
          <tr>
            <td className="font-bold">cardContainer</td>
            <td>`<ul/>`標籤元素</td>
            <td>HTMLElement</td>
            <td>卡片元素節點</td>
          </tr>
          <tr>
            <td className="font-bold">title</td>
            <td>-</td>
            <td>string</td>
            <td>卡片標題(Header)</td>
          </tr>
          <tr>
            <td className="font-bold">minimize</td>
            <td>false</td>
            <td>boolean</td>
            <td>是否為縮小狀態</td>
          </tr>
        </tbody>
      </table>
    </div>
<br/>

> ### Info 類別
> <span className="sb-unstyled alert-msg">負責整併card資料欄位(不會直接操作到!)</span>  

```javascript
  BasicInfoCard._infoStruct = new Info(infoArray);
  //此處的_infoStruct屬性禁止外部取用!
```  

  - #### parameters 參數設定
    - <span className="sb-unstyled font-black">infoArray</span>
      <span className="sb-unstyled data-type str">array</span>  
      `BasicInfoCard`傳入的資料設定陣列(infolist)

    <br/>

  - #### properties 內部屬性
    <div className="sb-unstyled table-container overflow-hidden">
      <table className="sb-unstyled table-content">
        <thead>
          <tr className="text-center">
            <td>property</td>
            <td>default</td>
            <td>type</td>
            <td>descriptions</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td className="font-bold">originInfos</td>
            <td>-</td>
            <td>object</td>
            <td>包裝原始傳入的infoList設定</td>
          </tr>
          <tr>
            <td className="font-bold">rowNum</td>
            <td>0</td>
            <td>number</td>
            <td>紀錄資料區塊數量</td>
          </tr>
          <tr>
            <td className="font-bold">rows</td>
            <td>[]</td>
            <td>array</td>
            <td>儲存整理後的各區塊資料物件</td>
          </tr>
        </tbody>
      </table>
    </div>