import{B as E,D as g}from"./Utils-DOz9aA_P.js";import $ from"./PaletteAPIdoc-DHViUEHT.js";import"./iframe-DpQgjgPA.js";import"./preload-helper-DLLWEBaG.js";const k=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],w=[0,60,120,180,240,300],_=["red","yellow","green","cyan","blue","purple"],R=_.reduce((l,e,a)=>(l[e]=w[a],l),{}),C=new Map;for(let l=0;l<k.length;l++)C.set(l,k[l]);class p{static normalizeCircular(e){return(e%360+360)%360}static getRandomNum(e,a){let r=[e,a].sort((t,o)=>t-o);return Math.floor(Math.random()*(r[1]-r[0]+1))+r[0]}static randomDigit(){return Math.floor(Math.random()*15)+1}static randomHexColor(){let e="#";for(let a=0;a<6;a++)e+=C.get(p.randomDigit());return e}static tohexDigits(e){let a=e.map(r=>Array.from(C.values()).indexOf(r.toLowerCase()));return a[0]*16+a[1]}static circular_distance(e,a){const r=Math.abs(e-a);return Math.min(r,360-r)}static luminance(e){let[a,r,t]=e.replace(/[rgb()\s+]/g,"").split(",");return(.2126*a+.7152*r+.0722*t)/255}}var v={colorCounts:1,alpha:1,colorMode:"hex",style:"random",tone:_[p.getRandomNum(0,5)],offset:10,saturationFixed:!1,lightnessFixed:!1};function O(l=v){let e=Object.assign({},v,l),a=e.colorMode,r=T(e);switch(a){case"hex":return r.map(t=>t.toHex());case"rgb":return r.map(t=>t.toRgb());default:return r.map(t=>t.toHsl())}}function T({colorCounts:l,alpha:e,style:a,tone:r,offset:t,saturationFixed:o,lightnessFixed:h}){let c=[],n=R[r];for(let u=0;u<l;u++){let s=S(a,n),m=B(o),i=P(h),d=new D(s,m,i,e);c.push(d)}return c.sort(function(u,s){let m=116*Math.pow((u.luminance+.055)/1.055,2)-16;return 116*Math.pow((s.luminance+.055)/1.055,2)-16-m})}function S(l,e,a){function r(t){let o;switch(t){case"contrast":o=e+p.getRandomNum(120,240);break;case"same":o=e+p.getRandomNum(-30,30);break;default:o=p.getRandomNum(0,359);break}return p.normalizeCircular(o)}return r(l)}function B(l=!1){return typeof l=="number"?l:p.getRandomNum(20,90)}function P(l=!1){return typeof l=="number"?l:p.getRandomNum(20,90)}class D{constructor(e,a,r,t){this.base={h:e,s:a,l:r,a:t},this.luminance=p.luminance(this.toRgb())}toRgb(){return x.hslTorgb(this.toHsl())}toHex(){return x.hslTohex(this.toHsl())}toHsl(){let{h:e,s:a,l:r,a:t}=this.base;return t!==1?`hsl(${e} ${a} ${r} / ${t})`:`hsl(${e} ${a} ${r})`}}class x{static hexTorgb(e){let a="";const r=Array.from(e.slice(1,3)),t=Array.from(e.slice(3,5)),o=Array.from(e.slice(5,7)),h=Array.from(e.slice(7,9));let c=p.tohexDigits(r),n=p.tohexDigits(t),u=p.tohexDigits(o),s=Math.round(p.tohexDigits(h)/255*100)/100;return s==1?a=`rgb(${c},${n},${u})`:a=`rgb(${c},${n},${u},${s})`,a}static rgbTohsl(e){let r=e.toLowerCase().replace(/[rgb()\s+]/g,"").split(",").map(b=>Math.round(b/255*100)/100),[t,o,h,c]=r,n=Math.max(...r),u=Math.min(...r),s=n-u,m,i,d,f;return n===u?m=0:n==t&&o>=h?m=60*((o-h)/s)+0:n==t&&o<h?m=60*((o-h)/s)+360:n==o?m=60*((h-t)/s)+120:n==h&&(m=60*((t-o)/s)+240),d=Math.round((n+u)/2*100)/100,d==0||n==u?i=0:d>0&&d<=.5?i=Math.round(Math.abs(s/(2*d))*100):d>.5&&(i=Math.round(Math.abs(s/(2-2*d))*100)),i=i>100?100:i,d=d*100>100?100:d*100,f=c||1,f!==1?`hsl(${Math.round(m)},${i}%,${d}%/${f})`:`hsl(${Math.round(m)},${i}%,${d}%)`}static hslTorgb(e){let a=e.toLowerCase().replace(/[hsl()/+]/g,"").replace(/\s+/g,",").split(","),[r,t,o,h]=a;r=(r%360+360)%360,t=parseInt(t)/100,o=parseInt(o)/100;const c=(1-Math.abs(2*o-1))*t,n=r/60,u=c*(1-Math.abs(n%2-1));let s=0,m=0,i=0;0<=n&&n<1?[s,m,i]=[c,u,0]:1<=n&&n<2?[s,m,i]=[u,c,0]:2<=n&&n<3?[s,m,i]=[0,c,u]:3<=n&&n<4?[s,m,i]=[0,u,c]:4<=n&&n<5?[s,m,i]=[u,0,c]:5<=n&&n<6&&([s,m,i]=[c,0,u]);const d=o-c/2,f=Math.round((s+d)*255),b=Math.round((m+d)*255),y=Math.round((i+d)*255);return h&&h!==1?`rgb(${f},${b},${y},${h})`:`rgb(${f},${b},${y})`}static rgbTohex(e){return`#${e.replace(/[rgb()\s+]/g,"").split(",").map(t=>{t=parseFloat(t),t<1&&(t=Math.floor(t*255));let o=t%16;return`${C.get(Math.floor(t/16))}${C.get(o)}`}).join("")}`}static hslTohex(e){let a=x.hslTorgb(e);return x.rgbTohex(a)}}const F="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%203.5V12.5M12.5%208H3.5'%20stroke='white'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var L={limits:5,defaults:[]};class G extends E{constructor(e={}){const a=document.createElement("div");g.addClass(a,["color-picker"]),super(a),this._config=Object.assign({},L,e),this.customColors=[],this.defaultColors=[...this._config.defaults],this._picker=this._createCanvas(),this._init(),this._bindEvent()}get picker(){return this._picker}_init(){for(let r of this.defaultColors){const t=document.createElement("div");g.addClass(t,["color"]),t.style.backgroundColor=r,g.setAttribute(t,"colorpick",r),this.getElem().appendChild(t)}const e=document.createElement("button");e.type="button";const a=document.createElement("img");a.src=F,e.append(a),g.addClass(e,["btn","btn-sm","btn-primary","add-color-btn"]),this.getElem().appendChild(e),this._addBtn=e,g.addClass(this._picker,["picker"]),this.getElem().appendChild(this._picker)}_bindEvent(){const e=this._picker.querySelector(".hue-range .picker-btn"),a=this._picker.querySelector(".alpha-range .picker-btn");function r(){const{x:t,y:o}=this._addBtn.getBoundingClientRect();g.toggleClass(this._picker,["visible"])}this.onevent(this._addBtn,"click",r.bind(this)),this.onevent(e,"pointerdown",()=>{console.log("pointerdown!")}),this.onevent(a,"pointerdown",()=>{console.log("pointerdown!")})}_createCanvas(){const e=document.createElement("div"),a=document.createElement("div"),r=document.createElement("canvas"),t=r.getContext("2d"),o=r.width,h=r.height,c=t.createLinearGradient(0,0,o,0);c.addColorStop(0,"#d9d9d9"),c.addColorStop(1,"#d23b1e"),t.fillStyle=c,t.fillRect(0,0,o,h);const n=t.createLinearGradient(0,0,0,h);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n,t.fillRect(0,0,o,h);const u=document.createElement("button"),s=document.createElement("button"),m=document.createElement("button"),i=document.createElement("div"),d=document.createElement("div");return a.append(r,u),i.append(m),d.append(s),e.append(a,d,i),g.addClass(a,["color-range"]),g.addClass(i,["alpha-range"]),g.addClass(d,["hue-range"]),g.addClass(u,["picker-btn"]),g.addClass(s,["picker-btn"]),g.addClass(m,["picker-btn"]),e}}const H=({colorCounts:l,colorMode:e,alpha:a,style:r,tone:t,offset:o,saturationFixed:h,lightnessFixed:c,saturation:n,lightness:u})=>{let s=document.createElement("div");s.className="flex";const i=O({colorCounts:l,colorMode:e,alpha:a,style:r,tone:t||"red",offset:o,saturationFixed:h&&n,lightnessFixed:c&&u});for(let b=0;b<l;b++){const y=document.createElement("div");y.style.width="30px",y.style.height="30px",y.style.backgroundColor=i[b],s.appendChild(y)}var d={limits:5,defaults:[...i.slice(0,3)]};const f=new G(d);return console.log(f),s.appendChild(f.getElem()),s},{fn:j,expect:q}=__STORYBOOK_MODULE_TEST__,{action:U}=__STORYBOOK_MODULE_ACTIONS__,z={title:"Components/Palette",tags:["autodocs"],parameters:{docs:{source:{format:!0,language:"html"},page:$}},render:({...l})=>H({...l}),argTypes:{colorCounts:{control:{type:"number",min:1},type:{required:!0},description:"表格元素id",table:{category:"configurations",type:{summary:"number"}}},colorMode:{control:"select",description:"色碼模式",options:["hex","rgb","hsl"],table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"string"}}},style:{control:"select",options:["random","same","contrast"],description:"色系樣式",table:{category:"configurations",defaultValue:{summary:"random"},type:{summary:"string"}}},tone:{control:"select",options:["red","yellow","green","cyan","blue","purple"],description:"指定色系",table:{category:"configurations",defaultValue:{summary:"null"},type:{summary:"string"}}},offset:{control:{type:"number",min:1},description:"偏移量",table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"number"}}},alpha:{control:{type:"number",min:0,max:1},description:"透明度",table:{category:"configurations",defaultValue:{summary:"1"},type:{summary:"number"}}},saturationFixed:{control:"boolean",description:"是否固定飽和度",table:{category:"configurations",defaultValue:{summary:"false"},type:{summary:"number | boolean"}}},saturation:{if:{arg:"saturationFixed",truthy:!0},control:{type:"number",min:0,max:100},description:"飽和度固定值",table:{category:"configurations",defaultValue:{summary:"random(20~90)"},type:{summary:"number"}}},lightnessFixed:{control:"boolean",description:"是否固定明度",table:{category:"configurations",defaultValue:{summary:"false"},type:{summary:"number | boolean"}}},lightness:{if:{arg:"lightnessFixed",truthy:!0},control:{type:"number",min:0,max:100},description:"明度固定值",table:{category:"configurations",defaultValue:{summary:"random(20~90)"},type:{summary:"number"}}}},args:{colorCounts:1,colorMode:"hsl",alpha:1,style:"random",offset:10,tone:"red",saturationFixed:!1,lightnessFixed:!1}},M={args:{colorCounts:10,colorMode:"hsl",style:"random",alpha:1,offset:20,saturationFixed:!1,lightnessFixed:!0,saturation:90,lightness:70}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  args: {
    colorCounts: 10,
    colorMode: 'hsl',
    style: 'random',
    alpha: 1,
    offset: 20,
    saturationFixed: false,
    lightnessFixed: true,
    saturation: 90,
    lightness: 70
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...M.parameters?.docs?.source}}};const K=["Palette"];export{M as Palette,K as __namedExportsOrder,z as default};
