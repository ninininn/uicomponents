import{P as F,M as A,a as D}from"./index-vRTWSlA6.js";import{B as S,U as e}from"./Utils-MIAVsKBh.js";import H from"./NotificationAPIdoc-BHVxUCAr.js";import"./iframe-BsY5FQ7T.js";import"./preload-helper-DLLWEBaG.js";class g extends S{constructor(t,s,a){let r=document.createElement("div");r.className="notify-container",r.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,super(r,s.theme||"light"),this.UItype="Notification",this.options={...this.config,...s},this.notifyTrigger=t,this.type=a,this._instance=this._defineType(this._elem,this.type),this.options.confirm&&(this.confirm=this._confirmAndcancel(this.options.confirm,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),this.options.cancel&&(this.cancel=this._confirmAndcancel(this.options.cancel,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._init()}get config(){return{type:"msg",theme:"light",maxWidth:"auto",area:["auto","auto"],msgContent:null,customContent:null,msgTitle:null,classes:null,handler:null,placement:"center-center",confirm:"確認",cancel:"取消"}}_defineType(t,s){switch(s){case"toast":return new O(t,this.notifyTrigger,this.options);case"modal":return new V(t,this.options);case"popover":return new q(t,this.notifyTrigger,this.options);case"msg":return new M(t,this.notifyTrigger,this.options);default:console.error("必選一種頁面類型");break}}_init(){if(this.options.msgTitle&&this.options.msgTitle.toLowerCase()!=="false"){let t=this._elem.querySelector(".notify-header"),s=document.createElement("h3");e.setText(s,this.options.msgTitle),t.appendChild(s)}if(this.options.msgContent){let t=this._elem.querySelector(".notify-content");e.setText(t,this.options.msgContent)}this._render(),this._bindEvent(),document.body.appendChild(this._elem)}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",s=this._theme==="dark"?"#F3F4F6":"#1F2937";e.setProperty(this._elem,"--theme",t),e.setProperty(this._elem,"--text",s),e.setProperty(this._elem,"--maxWidth",this.options.maxWidth),e.setProperty(this._elem,"--w",this.options.area[0]),e.setProperty(this._elem,"--h",this.options.area[1])}_bindEvent(){this.onevent(this.notifyTrigger,"click",this.show.bind(this)),this.confirmBtn&&(this.onevent(this.confirmBtn,"click",this.hide.bind(this)),this.cancelBtn&&this.onevent(this.cancelBtn,"click",this.hide.bind(this)))}_confirmAndcancel(t,s){let a=Array.isArray(t)?t:[t],[r,n]=a;return{actionType:s,btnTxt:r,handler:n}}_setBtns(t){let s=this._elem.querySelector(".notify-actionbtns"),a=document.createElement("button"),r=["btn","btn-primary"];return t.actionType!=="confirm"&&r.push("outline-btn"),e.addClass(a,r),e.setText(a,t.btnTxt),e.setAttribute(a,`${t.actionType}btn`),s.appendChild(a),a}_setPosition(t){switch(e.clearClass(this._elem,["notify-container",...this.options.classes]),t){case"right-top":e.addClass(this._elem,["right-[5rem]","top-[2rem]"]);break;case"right-bottom":e.addClass(this._elem,["right-[5rem]","bottom-[2rem]"]);break;case"left-top":e.addClass(this._elem,["left-[5rem]","top-[2rem]"]);break;case"left-bottom":e.addClass(this._elem,["left-[5rem]","bottom-[2rem]"]);break;case"center-top":e.addClass(this._elem,["left-[50%]","top-[2rem]","-translate-x-[50%]"]);break;case"center-bottom":e.addClass(this._elem,["left-[50%]","bottom-[2rem]","-translate-x-[50%]"]);break;case"center":e.addClass(this._elem,["top-[50%]","left-[50%]","translate-[-50%_-50%]"]);break}}show(){this._setPosition(this.options.placement),this._instance.onShow()}hide(){this._instance.onHide()}}class O extends D{constructor(t,s,a){let{transition:r,duration:n,timing:i}=a,h={transition:r||"transition-opacity",duration:n||300,timing:i||"ease-out"};super(t,t.querySelector("[data-cancelbtn]"),h),this.msg=this._options.msgContent,this.confirmBtn=this._targetEl.querySelector("[data-confirmbtn]"),this.cancelBtn=this._targetEl.querySelector("[data-cancelbtn]"),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifytoast")}onShow(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.remove("opacity-0"),this._targetEl.classList.add("opacity-100")}onHide(){super.hide()}updateOnHide(t){super.updateOnHide(t)}}class V extends A{constructor(t,s){let{backdrop:a,backdropClasses:r,closable:n}=s,i={backdrop:a,backdropClasses:"backdrop "+r,closable:n};super(t,i),this.confirmBtn=this._targetEl.querySelector("[data-confirmbtn]"),this.cancelBtn=this._targetEl.querySelector("[data-cancelbtn]"),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifymodal")}onShow(){document.body.appendChild(this._targetEl),super.show(),e.removeClass(this._targetEl,["flex"])}onHide(){super.hide()}}class q extends F{constructor(t,s,a){let{triggerType:r,offset:n}=a,i={triggerType:r,offset:n};super(t,s,i)}_init(){e.setAttribute(this._targetEl,"notifypopover")}get config(){return this._options}onShow(){document.body.appendChild(this._targetEl),super.show()}onHide(){super.hide()}}class M{constructor(t,s,a){let{countdown:r}=a;this._targetEl=t,this._options={...this.config,countdown:r},this.bindHandler=this.onHide.bind(this),this._init()}get config(){return{countdown:1e3}}_init(){this._render()}_render(){e.setAttribute(this._targetEl,"notifymsg")}onShow(){e.removeClass(this._targetEl,["hidden","opacity-0"]),e.addClass(this._targetEl,["opacity-100"]),this._render(),setTimeout(this.onHide.bind(this),100)}onHide(){setTimeout(()=>{e.removeClass(this._targetEl,["opacity-100"]),e.addClass(this._targetEl,["opacity-0"])},this._options.countdown)}}window.Notification=g;const L=({type:o,area:t,theme:s,maxWidth:a,msgContent:r,customContent:n,msgTitle:i,classes:h,placement:b,confirm:f,cancel:_,handlers:E,backdrop:C,backdropClasses:v,closable:B,triggerType:T,offset:x,countdown:w})=>{let y=document.createElement("div");y.className="mx-auto";let u=document.createElement("button");u.className="btn btn-primary",u.textContent="Show Notification",y.appendChild(u);let c={type:o,theme:s,maxWidth:a,area:t||["auto","auto"],msgContent:r,customContent:n,msgTitle:i,classes:h,placement:b,confirm:f,cancel:_,handlers:E};switch(o){case"modal":c.backdrop=C,c.backdropClasses=v,c.closable=B;break;case"toast":break;case"popover":c.triggerType=T,c.offset=x;break;case"msg":c.countdown=w;break}let k=new g(u,c,o);return console.log("notification_instance:",k),y},{fn:$,expect:K}=__STORYBOOK_MODULE_TEST__,{action:R}=__STORYBOOK_MODULE_ACTIONS__,Y={title:"Components/Notification",tags:["autodocs"],parameters:{docs:{source:{format:!0,language:"html"},page:H}},render:({...o})=>L({...o}),argTypes:{type:{control:"select",options:["toast","modal","popover","msg"],type:{required:!0},description:"跳出通知種類",table:{category:"parameters",defaultValue:{summary:"msg"},type:{summary:"string"}}},backdrop:{control:"select",options:["static","dynamic"],if:{arg:"type",eq:"modal"},description:"背景遮罩類型",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"static"},type:{summary:"string"}}},backdropClasses:{control:"text",if:{arg:"type",eq:"modal"},description:"背景遮罩關閉類型",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"static"},type:{summary:"string"}}},closable:{control:"boolean",if:{arg:"type",eq:"modal"},description:"背景遮罩關閉類型",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"true"},type:{summary:"boolean"}}},triggerType:{control:"select",options:["hover","click","none"],if:{arg:"type",eq:"popover"},description:"觸發動作類型",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"hover"},type:{summary:"string"}}},offset:{control:"number",if:{arg:"type",eq:"popover"},description:"距離觸發元素的位置距離",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"10"},type:{summary:"number"}}},countdown:{control:"number",if:{arg:"type",eq:"msg"},description:"自訂倒數消失時間",table:{category:"parameters",subcategory:"private property",defaultValue:{summary:"1000"},type:{summary:"number"}}},theme:{control:"select",options:["light","dark"],description:"通知視窗的尺寸大小",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"light"},type:{summary:"string"}}},maxWidth:{control:"text",description:"通知視窗的最大尺寸",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"auto"},type:{summary:"string"}}},area:{control:"array",description:"通知視窗的尺寸大小",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"[auto, auto]"},type:{summary:"array"}}},msgContent:{control:"text",description:"訊息內容",table:{category:"parameters",subcategory:"options properties",type:{summary:"string"}}},customContent:{control:"string",description:"自訂訊息innerHTML結構",table:{category:"parameters",subcategory:"options properties",type:{summary:"string"}}},msgTitle:{control:"text",description:"通知視窗標題文字，如果不需要標題可以傳入空字串或是false",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"-"},type:{summary:"string"}}},classes:{control:{type:"array"},description:"自定義class，每個class以tailwindcss property放入",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:".msg"},type:{summary:"array"}}},placement:{control:{type:"select"},options:["right-bottom","right-top","left-bottom","left-top","center-bottom","center-top"],description:"訊息框彈出位置",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"center"},type:{summary:"string"}}},confirm:{control:{type:"text"},description:"確認按鈕文字及callback函式(此處僅提供設定按鈕文字)",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"確定"},type:{summary:"array"}}},cancel:{control:{type:"text"},description:"取消按鈕文字及callback函式(此處僅提供設定按鈕文字)",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"取消"},type:{summary:"array"}}},handlers:{action:"click",control:"function",description:"點擊觸發元素後的callback函式",table:{category:"parameters",subcategory:"options properties",defaultValue:{summary:"null"},type:{summary:"function"}}}},args:{type:"msg",theme:"light",maxWidth:"auto",area:["auto","auto"],msgContent:"這是測試用通知內容",customContent:"<div>customInner</div>",msgTitle:"通知",classes:["notification"],placement:"left-top",confirm:"確定",cancel:"取消",backdrop:"static",backdropClasses:"bg-gray-500/50",closable:!1,triggerType:"hover",offset:10,countdown:1e3}},l={args:{type:"toast",placement:"right-top",msgContent:"動綠是昔毛叫這頭收乞高姐力司「黑枝乾」化氣星常每貝木嗎見雲黃巴事冬更珠，亭肖哪飯隻朱者英二活經貫綠「只地話入」卜風連語貓身陽黑空次司月她！還室意蝴士下卜後唱筆至旦民訴跑書向。後北愛升科訴把肖止聽對。",maxWidth:"360px"}},p={args:{type:"modal",placement:"center",confirm:"確定",cancel:"取消"}},m={args:{type:"popover",placement:"top"}},d={args:{type:"alert",placement:"center"}};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  args: {
    type: "toast",
    placement: "right-top",
    msgContent: "動綠是昔毛叫這頭收乞高姐力司「黑枝乾」化氣星常每貝木嗎見雲黃巴事冬更珠，亭肖哪飯隻朱者英二活經貫綠「只地話入」卜風連語貓身陽黑空次司月她！還室意蝴士下卜後唱筆至旦民訴跑書向。後北愛升科訴把肖止聽對。",
    maxWidth: "360px"
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...l.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    type: "modal",
    placement: "center",
    confirm: "確定",
    cancel: "取消"
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...p.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    type: "popover",
    placement: "top"
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...m.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    type: "alert",
    placement: "center"
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...d.parameters?.docs?.source}}};const X=["Toast","Modal","Popover","Alert"];export{d as Alert,p as Modal,m as Popover,l as Toast,X as __namedExportsOrder,Y as default};
