import{M as b,P as f,a as y}from"./index-vRTWSlA6.js";import{U as i,B as m}from"./Utils-B-ARuVSm.js";class h{static toast(t,e={}){return new p(t,e).pushItem(e)}static modal(t,e={}){let s=h._createTargetContainer();return new g(s,e)}static popover(t,e={}){let s=h._createTargetContainer();return new C(s,t,e)}static msg(t,e={}){let s=h._createTargetContainer();return new w(s,e)}static _createTargetContainer(){let t=document.createElement("div");return t.className="notify-container",t.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,t}static _garbage(t){}}class _ extends m{constructor(t,e={}){super(t,e.theme||"light"),this.UIType="BaseMsg",this.options={...this.config,...e},this._init()}get config(){return{type:"modal",theme:"light",maxWidth:null,area:["auto","auto"],msgContent:null,customContent:null,msgTitle:"通知",classes:[],placement:"center",confirm:null,cancel:null,handler:null,btnList:[]}}_init(){let{msgTitle:t,icon:e,msgContent:s,customContent:n,btnList:o,confirm:a,cancel:c}=this.options;if(e){let r=this._elem.querySelector(".notify-header"),l=document.createElement("img");l.src=`notify-icons/${e}.svg`,r.appendChild(l)}if(t&&t.toLowerCase()!=="false"){let r=this._elem.querySelector(".notify-header"),l=document.createElement("h3");i.setText(l,t),r.appendChild(l)}if(s){let r=this._elem.querySelector(".notify-content");i.setText(r,s)}if(n){let r=this._elem.querySelector(".notify-content");n instanceof HTMLElement?r.appendChild(n):r.innerHTML+=n}if(o){let r=this._elem.querySelector(".notify-actionbtns");for(let l of o){let u=i.setButtons(l);r.appendChild(u)}}a&&(this.confirm=this._confirmAndcancel(a,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),c&&(this.cancel=this._confirmAndcancel(c,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._render()}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",e=this._theme==="dark"?"#F3F4F6":"#1F2937";i.setProperty(this._elem,"--theme",t),i.setProperty(this._elem,"--text",e),i.setProperty(this._elem,"--maxWidth",this.options.maxWidth),i.setProperty(this._elem,"--w",this.options.area[0]),i.setProperty(this._elem,"--h",this.options.area[1]),this.options.type!=="toast"&&this.options.type!=="popover"&&this._setPosition(this.options.placement)}_confirmAndcancel(t,e){let s=Array.isArray(t)?t:[t],[n,o]=s;return{actionType:e,btnTxt:n,handler:o}}_setBtns(t){let e=this._elem.querySelector(".notify-actionbtns"),s=document.createElement("button"),n=["btn","btn-primary"];return t.actionType!=="confirm"&&n.push("outline-btn"),i.addClass(s,n),i.setText(s,t.btnTxt),i.setAttribute(s,`${t.actionType}btn`),e.appendChild(s),s}_setPosition(t){i.setPosition(this._elem,t,["notify-container",...this.options.classes])}}class v extends m{constructor(t){let{transition:e,duration:s,timing:n}=t,o={transition:e||"transition-opacity",duration:s||300,timing:n||"ease-out"},a=h._createTargetContainer(),c=i.setButtons({icon:"close",classes:["text-btn"]});a.querySelector(".notify-header").appendChild(c),super(a,t.theme||"light"),this.UIType="ToastItem",this.style=t.style||"accent",this._base=new _(this._elem,t),this.dismiss=new y(this._elem,c,o),this._init()}_init(){switch(this._base.options.icon?i.setProperty(this._elem,"--style",`var(--${this._base.options.icon})`):i.setProperty(this._elem,"--style","var(--graystyle)"),this.style){case"bordered":i.setAttribute(this._elem,`toast-${this.style}`);break;case"accent":i.setAttribute(this._elem,`toast-${this.style}`);break}i.addClass(this._elem,["opacity-0","transition-all"]),setTimeout(()=>{i.addClass(this._elem,["opacity-100"])},100),this._bindEvent()}_bindEvent(){this.clearItem()}onHide(){this.dismiss.hide()}clearItem(){async function t(){const e=s=>new Promise(n=>{setTimeout(n,s)});await e(5e3),this.dismiss.hide(),await e(2e3),this._elem.remove()}t.bind(this)()}}class p{constructor(t,e){if(t.dataset.toastInit)return p.instances[t.dataset.toastInit];this.options=e,this.trigger=t,this.toastItems=[],this._init(),this.id=`toast-${Date.now()}`,t.dataset.toastInit=this.id,p.instances[this.id]=this}static instances={};_init(){this.toastContainer=document.createElement("div"),i.addClass(this.toastContainer,["toast-container"]),i.setPosition(this.toastContainer,this.options.placement,["toast-container"]),document.body.appendChild(this.toastContainer),new MutationObserver(e=>{e[0].removedNodes.length!==0&&this.clearItem()}).observe(this.toastContainer,{childList:!0})}_bindEvent(){this.onevent(this.trigger,"click",this.pushItem),this.clearItem()}pushItem(){let t=new v(this.options);this.toastItems.push(t),this.toastContainer.appendChild(t._elem)}clearItem(){this.toastItems.shift()}}class g extends m{constructor(t,e){let{backdrop:s,backdropClasses:n,closable:o}=e,a={backdrop:s||"static",backdropClasses:"backdrop "+n,closable:o||!1};super(t,e.theme),this.UIType="ModalMsg",this._base=new _(t,e),this.modal=new b(t,a),this._init()}_init(){this.appendElem(this._elem),this.onShow(),this._bindEvent(),i.setAttribute(this._elem,"notifymodal")}onShow(){this.modal.show(),i.removeClass(this._elem,["flex"])}onHide(){this.modal.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class C extends m{constructor(t,e,s){let{triggerType:n,offset:o}=s,a={triggerType:n||"click",offset:o||10};super(t,s.theme||"light"),this.UIType="PopoverMsg",this._options={...s,...a},this._base=new _(t,s),this.popover=new f(t,e,a),this._init()}_init(){this.appendElem(this._elem),i.setAttribute(this._elem,"notifypopover"),this._bindEvent()}get config(){return this._options}onShow(){this.popover.show()}onHide(){this.popover.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class w extends m{constructor(t,e){let{countdown:s}=e;super(t,e.theme||"light"),this.UIType="DefaultMsg",this._options={...this.config,countdown:s},this._base=new _(t,e),this._init()}get config(){return{countdown:1e3}}_init(){this.appendElem(this._elem),i.setAttribute(this._elem,"notifymsg"),this._bindEvent(this._options.countdown)}_bindEvent(t){async function e(){const s=n=>new Promise(o=>{setTimeout(o,n)});await s(t),i.addClass(this._elem,["opacity-0"]),await s(1e3),this._elem.remove()}e.bind(this)()}}window.Notification=h;export{h as N};
