import{M as u,P as b,a as f}from"./index-vRTWSlA6.js";import{U as s,B as l}from"./Utils-BgLV4tlq.js";class h{static toast(t,e={}){return new m(t,e).pushItem(e)}static modal(t,e={}){let i=h._createTargetContainer();return new g(i,e)}static popover(t,e={}){let i=h._createTargetContainer();return new v(i,t,e)}static msg(t,e={}){let i=h._createTargetContainer();return new C(i,e)}static _createTargetContainer(){let t=document.createElement("div");return t.className="notify-container",t.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,t}}class _ extends l{constructor(t,e={}){super(t,e.theme||"light"),this.options={...this.config,...e},this._init()}get config(){return{type:"modal",theme:"light",maxWidth:null,area:["auto","auto"],msgContent:null,customContent:null,msgTitle:"通知",classes:[],placement:"center",confirm:"確認",cancel:"取消",handler:null,btnList:[]}}_init(){let{msgTitle:t,msgContent:e,customContent:i,btnList:n,confirm:o,cancel:r}=this.options;if(t&&t.toLowerCase()!=="false"){let a=this._elem.querySelector(".notify-header"),d=document.createElement("h3");s.setText(d,t),a.appendChild(d)}if(e){let a=this._elem.querySelector(".notify-content");s.setText(a,e)}if(i){let a=this._elem.querySelector(".notify-content");i instanceof HTMLElement?a.appendChild(i):a.innerHTML+=i}if(n){let a=this._elem.querySelector(".notify-actionbtns");for(let d of n){let p=s.setButtons(d);a.appendChild(p)}}o&&(this.confirm=this._confirmAndcancel(o,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),r&&(this.cancel=this._confirmAndcancel(r,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._render()}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",e=this._theme==="dark"?"#F3F4F6":"#1F2937";s.setProperty(this._elem,"--theme",t),s.setProperty(this._elem,"--text",e),s.setProperty(this._elem,"--maxWidth",this.options.maxWidth),s.setProperty(this._elem,"--w",this.options.area[0]),s.setProperty(this._elem,"--h",this.options.area[1]),this.options.type!=="toast"&&this._setPosition(this.options.placement)}_confirmAndcancel(t,e){let i=Array.isArray(t)?t:[t],[n,o]=i;return{actionType:e,btnTxt:n,handler:o}}_setBtns(t){let e=this._elem.querySelector(".notify-actionbtns"),i=document.createElement("button"),n=["btn","btn-primary"];return t.actionType!=="confirm"&&n.push("outline-btn"),s.addClass(i,n),s.setText(i,t.btnTxt),s.setAttribute(i,`${t.actionType}btn`),e.appendChild(i),i}_setPosition(t){s.setPosition(this._elem,t,["notify-container",...this.options.classes])}}class y extends l{constructor(t,e){let{transition:i,duration:n,timing:o}=e,r={transition:i||"transition-opacity",duration:n||300,timing:o||"ease-out"},a=h._createTargetContainer();super(a,e.theme||"light"),this._base=new _(this._elem,e),this.dismiss=new f(this._elem,this._base.cancelBtn,r),this._init()}_init(){this._bindEvent()}_bindEvent(){this.clearItem()}onHide(){this.dismiss.hide()}clearItem(){setTimeout(()=>{this._elem.remove()},5e3)}}class m{constructor(t,e){if(t.dataset.toastInit)return m.instances[t.dataset.toastInit];this.options=e,this.trigger=t,this.toastItems=[],this._init(),this.id=`toast-${Date.now()}`,t.dataset.toastInit=this.id,m.instances[this.id]=this}static instances={};_init(){this.toastContainer=document.createElement("div"),s.addClass(this.toastContainer,["toast-container"]),s.setPosition(this.toastContainer,this.options.placement,["toast-container"]),document.body.appendChild(this.toastContainer)}_bindEvent(){this.onevent(this.trigger,"click",this.pushItem),this.clearItem()}pushItem(){let t=new y(this.trigger,this.options);this.toastItems.push(t),this.toastContainer.appendChild(t._elem)}clearItem(){setTimeout(()=>{this.toastItems.shift()},3e3)}}class g extends l{constructor(t,e){let{backdrop:i,backdropClasses:n,closable:o}=e,r={backdrop:i||"static",backdropClasses:"backdrop "+n,closable:o||!1};super(t,e.theme),this._base=new _(t,e),this.modal=new u(t,r),this._init()}_init(){document.body.appendChild(this._elem),this.onShow(),this._bindEvent(),s.setAttribute(this._elem,"notifymodal")}onShow(){this.modal.show(),s.removeClass(this._elem,["flex"])}onHide(){this.modal.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class v extends l{constructor(t,e,i){let{triggerType:n,offset:o}=i,r={triggerType:n||"click",offset:o||10};super(t,i.theme||"light"),this._options={...i,...r},this._base=new _(t,i),this.popover=new b(t,e,r),this.bindHandler=this.onHide.bind(this),this._init()}_init(){document.body.appendChild(this._elem),s.setAttribute(this._elem,"notifypopover"),this.onShow(),this._bindEvent()}get config(){return this._options}onShow(){this.popover.show()}onHide(){this.popover.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class C extends l{constructor(t,e){let{countdown:i}=e;super(t,e.theme||"light"),this._options={...this.config,countdown:i},this._base=new _(t,e),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return{countdown:1e3}}_init(){document.body.appendChild(this._elem),this._render(),this.onShow()}_render(){s.setAttribute(this._elem,"notifymsg")}onShow(){s.removeClass(this._elem,["hidden","opacity-0"]),s.addClass(this._elem,["opacity-100"]),this._render(),setTimeout(this.onHide.bind(this),100)}onHide(){setTimeout(()=>{s.removeClass(this._elem,["opacity-100"]),s.addClass(this._elem,["opacity-0"])},this._options.countdown)}}window.Notification=h;export{h as N};
