import"./Utils-D9cYNN_F.js";import O from"./PaletteAPIdoc-Dx7ZJRm0.js";import"./iframe-DOtvq2Ys.js";import"./preload-helper-DLLWEBaG.js";const $=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],T=[0,60,120,180,240,300],R=["red","yellow","green","cyan","blue","purple"],_=R.reduce((n,t,a)=>(n[t]=T[a],n),{}),p=new Map;for(let n=0;n<$.length;n++)p.set(n,$[n]);class h{static normalizeCircular(t){return(t%360+360)%360}static getRandomNum(t,a){let r=[t,a].sort((e,o)=>e-o);return Math.floor(Math.random()*(r[1]-r[0]+1))+r[0]}static randomDigit(){return Math.floor(Math.random()*15)+1}static randomHexColor(){let t="#";for(let a=0;a<6;a++)t+=p.get(h.randomDigit());return t}static tohexDigits(t){let a=t.map(r=>Array.from(p.values()).indexOf(r.toLowerCase()));return a[0]*16+a[1]}static circular_distance(t,a){const r=Math.abs(t-a);return Math.min(r,360-r)}static luminance(t){let[a,r,e]=t.replace(/[rgb()\s+]/g,"").split(",");return(.2126*a+.7152*r+.0722*e)/255}}var C={colorCounts:1,alpha:1,colorMode:"hex",style:"random",tone:R[h.getRandomNum(0,5)],offset:10,saturationFixed:!1,lightnessFixed:!1};function E(n=C){let t=Object.assign({},C,n),a=t.colorMode,r=w(t);switch(a){case"hex":return r.map(e=>e.toHex());case"rgb":return r.map(e=>e.toRgb());default:return r.map(e=>e.toHsl())}}function w({colorCounts:n,alpha:t,style:a,tone:r,offset:e,saturationFixed:o,lightnessFixed:g}){let m=[],s=_[r];for(let u=0;u<n;u++){let l=F(a,s),d=D(o),c=L(g),i=new v(l,d,c,t);m.push(i)}return m.sort(function(u,l){let d=116*Math.pow((u.luminance+.055)/1.055,2)-16;return 116*Math.pow((l.luminance+.055)/1.055,2)-16-d})}function F(n,t,a){function r(e){let o;switch(e){case"contrast":o=t+h.getRandomNum(120,240);break;case"same":o=t+h.getRandomNum(-30,30);break;default:o=h.getRandomNum(0,359);break}return h.normalizeCircular(o)}return r(n)}function D(n=!1){return typeof n=="number"?n:h.getRandomNum(20,90)}function L(n=!1){return typeof n=="number"?n:h.getRandomNum(20,90)}class v{constructor(t,a,r,e){this.base={h:t,s:a,l:r,a:e},this.luminance=h.luminance(this.toRgb())}toRgb(){return y.hslTorgb(this.toHsl())}toHex(){return y.hslTohex(this.toHsl())}toHsl(){let{h:t,s:a,l:r,a:e}=this.base;return e!==1?`hsl(${t} ${a} ${r} / ${e})`:`hsl(${t} ${a} ${r})`}}class y{static hexTorgb(t){let a="";const r=Array.from(t.slice(1,3)),e=Array.from(t.slice(3,5)),o=Array.from(t.slice(5,7)),g=Array.from(t.slice(7,9));let m=h.tohexDigits(r),s=h.tohexDigits(e),u=h.tohexDigits(o),l=Math.round(h.tohexDigits(g)/255*100)/100;return l==1?a=`rgb(${m},${s},${u})`:a=`rgb(${m},${s},${u},${l})`,a}static rgbTohsl(t){let r=t.toLowerCase().replace(/[rgb()\s+]/g,"").split(",").map(b=>Math.round(b/255*100)/100),[e,o,g,m]=r,s=Math.max(...r),u=Math.min(...r),l=s-u,d,c,i,f;return s===u?d=0:s==e&&o>=g?d=60*((o-g)/l)+0:s==e&&o<g?d=60*((o-g)/l)+360:s==o?d=60*((g-e)/l)+120:s==g&&(d=60*((e-o)/l)+240),i=Math.round((s+u)/2*100)/100,i==0||s==u?c=0:i>0&&i<=.5?c=Math.round(Math.abs(l/(2*i))*100):i>.5&&(c=Math.round(Math.abs(l/(2-2*i))*100)),c=c>100?100:c,i=i*100>100?100:i*100,f=m||1,f!==1?`hsl(${Math.round(d)},${c}%,${i}%/${f})`:`hsl(${Math.round(d)},${c}%,${i}%)`}static hslTorgb(t){let a=t.toLowerCase().replace(/[hsl()/+]/g,"").replace(/\s+/g,",").split(","),[r,e,o,g]=a;r=(r%360+360)%360,e=parseInt(e)/100,o=parseInt(o)/100;const m=(1-Math.abs(2*o-1))*e,s=r/60,u=m*(1-Math.abs(s%2-1));let l=0,d=0,c=0;0<=s&&s<1?[l,d,c]=[m,u,0]:1<=s&&s<2?[l,d,c]=[u,m,0]:2<=s&&s<3?[l,d,c]=[0,m,u]:3<=s&&s<4?[l,d,c]=[0,u,m]:4<=s&&s<5?[l,d,c]=[u,0,m]:5<=s&&s<6&&([l,d,c]=[m,0,u]);const i=o-m/2,f=Math.round((l+i)*255),b=Math.round((d+i)*255),M=Math.round((c+i)*255);return g&&g!==1?`rgb(${f},${b},${M},${g})`:`rgb(${f},${b},${M})`}static rgbTohex(t){return`#${t.replace(/[rgb()\s+]/g,"").split(",").map(e=>{e=parseFloat(e),e<1&&(e=Math.floor(e*255));let o=e%16;return`${p.get(Math.floor(e/16))}${p.get(o)}`}).join("")}`}static hslTohex(t){let a=y.hslTorgb(t);return y.rgbTohex(a)}}const H=({colorCounts:n,colorMode:t,alpha:a,style:r,tone:e,offset:o,saturationFixed:g,lightnessFixed:m,saturation:s,lightness:u})=>{let l=document.createElement("div");l.className="flex";const c=E({colorCounts:n,colorMode:t,alpha:a,style:r,tone:e||"red",offset:o,saturationFixed:g&&s,lightnessFixed:m&&u});for(let i=0;i<n;i++){const f=document.createElement("div");f.style.width="30px",f.style.height="30px",f.style.backgroundColor=c[i],l.appendChild(f)}return l},{fn:P,expect:V}=__STORYBOOK_MODULE_TEST__,{action:G}=__STORYBOOK_MODULE_ACTIONS__,I={title:"Components/Palette",tags:["autodocs"],parameters:{docs:{source:{format:!0,language:"html"},page:O}},render:({...n})=>H({...n}),argTypes:{colorCounts:{control:{type:"number",min:1},type:{required:!0},description:"表格元素id",table:{category:"configurations",type:{summary:"number"}}},colorMode:{control:"select",description:"色碼模式",options:["hex","rgb","hsl"],table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"string"}}},style:{control:"select",options:["random","same","contrast"],description:"色系樣式",table:{category:"configurations",defaultValue:{summary:"random"},type:{summary:"string"}}},tone:{control:"select",options:["red","yellow","green","cyan","blue","purple"],description:"指定色系",table:{category:"configurations",defaultValue:{summary:"null"},type:{summary:"string"}}},offset:{control:{type:"number",min:1},description:"偏移量",table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"number"}}},alpha:{control:{type:"number",min:0,max:1},description:"透明度",table:{category:"configurations",defaultValue:{summary:"1"},type:{summary:"number"}}},saturationFixed:{control:"boolean",description:"是否固定飽和度",table:{category:"configurations",defaultValue:{summary:"false"},type:{summary:"number | boolean"}}},saturation:{if:{arg:"saturationFixed",truthy:!0},control:{type:"number",min:0,max:100},description:"飽和度固定值",table:{category:"configurations",defaultValue:{summary:"random(20~90)"},type:{summary:"number"}}},lightnessFixed:{control:"boolean",description:"是否固定明度",table:{category:"configurations",defaultValue:{summary:"false"},type:{summary:"number | boolean"}}},lightness:{if:{arg:"lightnessFixed",truthy:!0},control:{type:"number",min:0,max:100},description:"明度固定值",table:{category:"configurations",defaultValue:{summary:"random(20~90)"},type:{summary:"number"}}}},args:{colorCounts:1,colorMode:"hsl",alpha:1,style:"random",offset:10,tone:"red",saturationFixed:!1,lightnessFixed:!1}},x={args:{colorCounts:10,colorMode:"hsl",style:"random",alpha:1,offset:20,saturationFixed:!1,lightnessFixed:!0,saturation:90,lightness:70}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    colorCounts: 10,
    colorMode: 'hsl',
    style: 'random',
    alpha: 1,
    offset: 20,
    saturationFixed: false,
    lightnessFixed: true,
    saturation: 90,
    lightness: 70
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...x.parameters?.docs?.source}}};const k=["Palette"];export{x as Palette,k as __namedExportsOrder,I as default};
