import{P as l,M as c,a as d}from"./index-vRTWSlA6.js";import{B as m,U as e}from"./Utils-MIAVsKBh.js";class p extends m{constructor(t,i,s){let n=document.createElement("div");n.className="notify-container",n.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,super(n,i.theme||"light"),this.UItype="Notification",this.options={...this.config,...i},this.notifyTrigger=t,this.type=s,this._instance=this._defineType(this._elem,this.type),this._init()}get config(){return{type:"msg",theme:"light",maxWidth:"auto",area:["auto","auto"],msgContent:null,customContent:null,msgTitle:null,classes:[],handler:null,placement:"center-center",confirm:"確認",cancel:"取消"}}_defineType(t,i){switch(i){case"toast":return new _(t,this.notifyTrigger,this.options);case"modal":return new f(t,this.options);case"popover":return new u(t,this.notifyTrigger,this.options);case"msg":return new g(t,this.notifyTrigger,this.options);default:console.error("必選一種頁面類型");break}}_init(){if(this.options.msgTitle&&this.options.msgTitle.toLowerCase()!=="false"){let t=this._elem.querySelector(".notify-header"),i=document.createElement("h3");e.setText(i,this.options.msgTitle),t.appendChild(i)}if(this.options.msgContent){let t=this._elem.querySelector(".notify-content");e.setText(t,this.options.msgContent)}this.options.confirm&&(this.confirm=this._confirmAndcancel(this.options.confirm,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),this.options.cancel&&(this.cancel=this._confirmAndcancel(this.options.cancel,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._render(),document.body.appendChild(this._elem),this._bindEvent()}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",i=this._theme==="dark"?"#F3F4F6":"#1F2937";e.setProperty(this._elem,"--theme",t),e.setProperty(this._elem,"--text",i),e.setProperty(this._elem,"--maxWidth",this.options.maxWidth),e.setProperty(this._elem,"--w",this.options.area[0]),e.setProperty(this._elem,"--h",this.options.area[1]),e.addClass(this._elem,["hidden"])}_bindEvent(){this.onevent(this.notifyTrigger,"click",this.show.bind(this)),this.confirmBtn&&(this.onevent(this.confirmBtn,"click",this.hide.bind(this)),this.confirm.handler&&this.confirmBtn.addEventListener("click",this.confirm.handler.bind(this)),this.cancelBtn&&this.onevent(this.cancelBtn,"click",this.hide.bind(this)))}_confirmAndcancel(t,i){let s=Array.isArray(t)?t:[t],[n,o]=s;return{actionType:i,btnTxt:n,handler:o}}_setBtns(t){let i=this._elem.querySelector(".notify-actionbtns"),s=document.createElement("button"),n=["btn","btn-primary"];return t.actionType!=="confirm"&&n.push("outline-btn"),e.addClass(s,n),e.setText(s,t.btnTxt),e.setAttribute(s,`${t.actionType}btn`),i.appendChild(s),s}_setPosition(t){switch(e.clearClass(this._elem,["notify-container",...this.options.classes]),t){case"right-top":e.addClass(this._elem,["right-[5rem]","top-[2rem]"]);break;case"right-bottom":e.addClass(this._elem,["right-[5rem]","bottom-[2rem]"]);break;case"left-top":e.addClass(this._elem,["left-[5rem]","top-[2rem]"]);break;case"left-bottom":e.addClass(this._elem,["left-[5rem]","bottom-[2rem]"]);break;case"center-top":e.addClass(this._elem,["left-[50%]","top-[2rem]","-translate-x-[50%]"]);break;case"center-bottom":e.addClass(this._elem,["left-[50%]","bottom-[2rem]","-translate-x-[50%]"]);break;case"center":e.addClass(this._elem,["top-[50%]","left-[50%]","translate-[-50%]"]);break}}show(){this._setPosition(this.options.placement),this._instance.onShow()}hide(){this._instance.onHide()}}class _ extends d{constructor(t,i,s){let{transition:n,duration:o,timing:r}=s,h={transition:n||"transition-opacity",duration:o||300,timing:r||"ease-out"};super(t,t.querySelector("[data-cancelbtn]"),h),this.msg=this._options.msgContent,this.confirmBtn=this._targetEl.querySelector("[data-confirmbtn]"),this.cancelBtn=this._targetEl.querySelector("[data-cancelbtn]"),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifytoast")}onShow(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.remove("opacity-0"),this._targetEl.classList.add("opacity-100")}onHide(){super.hide()}updateOnHide(t){super.updateOnHide(t)}}class f extends c{constructor(t,i){let{backdrop:s,backdropClasses:n,closable:o}=i,r={backdrop:s||"static",backdropClasses:"backdrop "+n,closable:o||!1};super(t,r),this.confirmBtn=this._targetEl.querySelector("[data-confirmbtn]"),this.cancelBtn=this._targetEl.querySelector("[data-cancelbtn]"),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifymodal")}onShow(){document.body.appendChild(this._targetEl),super.show(),e.removeClass(this._targetEl,["flex"])}onHide(){super.hide()}}class u extends l{constructor(t,i,s){let{triggerType:n,offset:o}=s,r={triggerType:n,offset:o};super(t,i,r)}_init(){e.setAttribute(this._targetEl,"notifypopover")}get config(){return this._options}onShow(){document.body.appendChild(this._targetEl),super.show()}onHide(){super.hide()}}class g{constructor(t,i,s){let{countdown:n}=s;this._targetEl=t,this._options={...this.config,countdown:n},this.bindHandler=this.onHide.bind(this),this._init()}get config(){return{countdown:1e3}}_init(){this._render()}_render(){e.setAttribute(this._targetEl,"notifymsg")}onShow(){e.removeClass(this._targetEl,["hidden","opacity-0"]),e.addClass(this._targetEl,["opacity-100"]),this._render(),setTimeout(this.onHide.bind(this),100)}onHide(){setTimeout(()=>{e.removeClass(this._targetEl,["opacity-100"]),e.addClass(this._targetEl,["opacity-0"])},this._options.countdown)}}window.Notification=p;export{p as N};
