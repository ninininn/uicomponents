import{P as d,M as m,a as p}from"./index-vRTWSlA6.js";import{B as _,U as e}from"./Utils-CNOZR5Xp.js";class f extends _{constructor(t){let i=document.createElement("div");i.className="notify-container",i.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,super(i),this.UItype="Notification",this.notifyTrigger=t}get config(){return{type:"msg",theme:"light",maxWidth:"auto",area:["auto","auto"],msgContent:null,customContent:null,msgTitle:null,classes:[],handler:null,placement:"center-center",confirm:"確認",cancel:"取消",btnList:[]}}toast(t){this.options={...this.config,...t},this._instance=this._defineType(this._elem,"toast"),this.initialize||this._init()}popover(t){this.options={...this.config,...t},this._instance=this._defineType(this._elem,"popover"),this.initialize||this._init()}modal(t){this.options={...this.config,...t},this._instance=this._defineType(this._elem,"modal"),this.initialize||this._init(),this._show()}msg(t){this.options={...this.config,...t},this._instance=this._defineType(this._elem,"msg"),this.initialize||this._init(),this._show()}_defineType(t,i){switch(i){case"toast":return new u(t,this.notifyTrigger,this.options);case"modal":return new b(t,this.options);case"popover":return new y(t,this.notifyTrigger,this.options);case"msg":return new C(t,this.notifyTrigger,this.options);default:console.error("必選一種頁面類型");break}}_init(){this.initialize=!0;let{msgTitle:t,msgContent:i,customContent:s,btnList:n,confirm:o,cancel:r}=this.options;if(this.type!=="toast"){if(t&&t.toLowerCase()!=="false"){let a=this._elem.querySelector(".notify-header"),l=document.createElement("h3");e.setText(l,t),a.appendChild(l)}if(i){let a=this._elem.querySelector(".notify-content");e.setText(a,i)}if(s){let a=this._elem.querySelector(".notify-content");a.innerHTML+=s}if(n){let a=this._elem.querySelector(".notify-actionbtns");for(let l of n){let c=e.setButtons(l);a.appendChild(c)}}o&&(this.confirm=this._confirmAndcancel(o,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),r&&(this.cancel=this._confirmAndcancel(r,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._render(),document.body.appendChild(this._elem),this._bindEvent()}}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",i=this._theme==="dark"?"#F3F4F6":"#1F2937";e.setProperty(this._elem,"--theme",t),e.setProperty(this._elem,"--text",i),e.setProperty(this._elem,"--maxWidth",this.options.maxWidth),e.setProperty(this._elem,"--w",this.options.area[0]),e.setProperty(this._elem,"--h",this.options.area[1]),e.addClass(this._elem,["hidden"])}_bindEvent(){this.confirmBtn&&(this.onevent(this.confirmBtn,"click",this.hide.bind(this)),this.confirm.handler&&this.onevent(this.confirmBtn,"click",this.confirm.handler.bind(this)),this.cancelBtn&&this.onevent(this.cancelBtn,"click",this.hide.bind(this)))}_confirmAndcancel(t,i){let s=Array.isArray(t)?t:[t],[n,o]=s;return{actionType:i,btnTxt:n,handler:o}}_setBtns(t){let i=this._elem.querySelector(".notify-actionbtns"),s=document.createElement("button"),n=["btn","btn-primary"];return t.actionType!=="confirm"&&n.push("outline-btn"),e.addClass(s,n),e.setText(s,t.btnTxt),e.setAttribute(s,`${t.actionType}btn`),i.appendChild(s),s}_setPosition(t){switch(e.clearClass(this._elem,["notify-container",...this.options.classes]),t){case"right-top":e.addClass(this._elem,["right-[5rem]","top-[2rem]"]);break;case"right-bottom":e.addClass(this._elem,["right-[5rem]","bottom-[2rem]"]);break;case"left-top":e.addClass(this._elem,["left-[5rem]","top-[2rem]"]);break;case"left-bottom":e.addClass(this._elem,["left-[5rem]","bottom-[2rem]"]);break;case"center-top":e.addClass(this._elem,["left-[50%]","top-[2rem]","-translate-x-[50%]"]);break;case"center-bottom":e.addClass(this._elem,["left-[50%]","bottom-[2rem]","-translate-x-[50%]"]);break;case"center":e.addClass(this._elem,["top-[50%]","left-[50%]","translate-[-50%]"]);break}}_show(){this._setPosition(this.options.placement),this._instance.onShow()}hide(){this._instance.onHide()}}class u{constructor(t,i,s){let{transition:n,duration:o,timing:r}=s;this._options=s,this.msgContainer=t,this._trigger=i,this.toastItems=[],this._init()}get config(){return{transition:"transition-opacity",duration:300,timing:"ease-out"}}_init(){e.setAttribute(this.msgContainer,"notifytoast"),this._bindEvent()}_bindEvent(){this._trigger.addEventListener("click",()=>{let t=new g;this.toastItems=[...this.toastItems,t]})}onShow(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.remove("opacity-0"),this._targetEl.classList.add("opacity-100")}onHide(){super.hide()}updateOnHide(t){super.updateOnHide(t)}}class g extends p{constructor(t,i,s){let{transition:n,duration:o,timing:r}=s,a={transition:n||"transition-opacity",duration:o||300,timing:r||"ease-out"};super(t,t.querySelector("[data-cancelbtn]"),a),this.msg=this._options.msgContent,this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifytoast")}onShow(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.remove("opacity-0"),this._targetEl.classList.add("opacity-100")}onHide(){super.hide()}updateOnHide(t){super.updateOnHide(t)}}class b extends m{constructor(t,i){let{backdrop:s,backdropClasses:n,closable:o}=i,r={backdrop:s||"static",backdropClasses:"backdrop "+n,closable:o||!1};super(t,r),this.confirmBtn=this._targetEl.querySelector("[data-confirmbtn]"),this.cancelBtn=this._targetEl.querySelector("[data-cancelbtn]"),this.bindHandler=this.onHide.bind(this),this._init()}get config(){return this._options}_init(){e.setAttribute(this._targetEl,"notifymodal")}onShow(){document.body.appendChild(this._targetEl),super.show(),e.removeClass(this._targetEl,["flex"])}onHide(){super.hide()}}class y extends d{constructor(t,i,s){let{triggerType:n,offset:o}=s,r={triggerType:n,offset:o};super(t,i,r)}_init(){e.setAttribute(this._targetEl,"notifypopover")}get config(){return this._options}onShow(){document.body.appendChild(this._targetEl),super.show()}onHide(){super.hide()}}class C{constructor(t,i,s){let{countdown:n}=s;this._targetEl=t,this._options={...this.config,countdown:n},this.bindHandler=this.onHide.bind(this),this._init()}get config(){return{countdown:1e3}}_init(){this._render()}_render(){e.setAttribute(this._targetEl,"notifymsg")}onShow(){e.removeClass(this._targetEl,["hidden","opacity-0"]),e.addClass(this._targetEl,["opacity-100"]),this._render(),setTimeout(this.onHide.bind(this),100)}onHide(){setTimeout(()=>{e.removeClass(this._targetEl,["opacity-100"]),e.addClass(this._targetEl,["opacity-0"])},this._options.countdown)}}window.Notification=f;export{f as N};
