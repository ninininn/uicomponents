import{M as b,P as f,a as y}from"./index-vRTWSlA6.js";import{U as s,B as c}from"./Utils-DgnMaxDl.js";class h{static toast(t,e={}){return new m(t,e).pushItem(e)}static modal(t,e={}){let i=h._createTargetContainer();return new v(i,e)}static popover(t,e={}){let i=h._createTargetContainer();return new w(i,t,e)}static msg(t,e={}){let i=h._createTargetContainer();return new C(i,e)}static _createTargetContainer(){let t=document.createElement("div");return t.className="notify-container",t.innerHTML=`
      <div class="notify-header"></div>
      <div class="notify-content"></div>
      <div class="notify-actionbtns"></div>`,t}}class p extends c{constructor(t,e={}){super(t,e.theme||"light"),this.UIType="BaseMsg",this.options={...this.config,...e},this._init(),console.log(this)}get config(){return{type:"modal",theme:"light",maxWidth:null,area:["auto","auto"],msgContent:null,customContent:null,msgTitle:"通知",classes:[],placement:"center",confirm:null,cancel:null,handler:null,btnList:[]}}_init(){let{msgTitle:t,icon:e,msgContent:i,customContent:n,btnList:o,confirm:r,cancel:_}=this.options;if(e){let a=this._elem.querySelector(".notify-header"),l=document.createElement("img");l.src=`/public/notify-icons/${e}.svg`,a.appendChild(l)}if(t&&t.toLowerCase()!=="false"){let a=this._elem.querySelector(".notify-header"),l=document.createElement("h3");s.setText(l,t),a.appendChild(l)}if(i){let a=this._elem.querySelector(".notify-content");s.setText(a,i)}if(n){let a=this._elem.querySelector(".notify-content");n instanceof HTMLElement?a.appendChild(n):a.innerHTML+=n}if(o){let a=this._elem.querySelector(".notify-actionbtns");for(let l of o){let u=s.setButtons(l);a.appendChild(u)}}r&&(this.confirm=this._confirmAndcancel(r,"confirm"),this.confirmBtn=this._setBtns(this.confirm)),_&&(this.cancel=this._confirmAndcancel(_,"cancel"),this.cancelBtn=this._setBtns(this.cancel)),this._render()}_render(){let t=this._theme==="dark"?"#1e222789":"#F3F4F6",e=this._theme==="dark"?"#F3F4F6":"#1F2937";s.setProperty(this._elem,"--theme",t),s.setProperty(this._elem,"--text",e),s.setProperty(this._elem,"--maxWidth",this.options.maxWidth),s.setProperty(this._elem,"--w",this.options.area[0]),s.setProperty(this._elem,"--h",this.options.area[1]),this.options.type!=="toast"&&this._setPosition(this.options.placement)}_confirmAndcancel(t,e){let i=Array.isArray(t)?t:[t],[n,o]=i;return{actionType:e,btnTxt:n,handler:o}}_setBtns(t){let e=this._elem.querySelector(".notify-actionbtns"),i=document.createElement("button"),n=["btn","btn-primary"];return t.actionType!=="confirm"&&n.push("outline-btn"),s.addClass(i,n),s.setText(i,t.btnTxt),s.setAttribute(i,`${t.actionType}btn`),e.appendChild(i),i}_setPosition(t){s.setPosition(this._elem,t,["notify-container",...this.options.classes])}}class g extends c{constructor(t){let{transition:e,duration:i,timing:n}=t,o={transition:e||"transition-opacity",duration:i||300,timing:n||"ease-out"},r=h._createTargetContainer();super(r,t.theme||"light"),this.UIType="ToastItem",this.style=t.style,this._base=new p(this._elem,t),this.dismiss=new y(this._elem,this._base.cancelBtn,o),this._init()}_init(){switch(this._base.options.icon?s.setProperty(this._elem,"--style",`var(--${this._base.options.icon})`):s.setProperty(this._elem,"--style","var(--graystyle)"),this.style){case"bordered":s.setAttribute(this._elem,`toast-${this.style}`);break;case"accent":s.setAttribute(this._elem,`toast-${this.style}`);break}s.addClass(this._elem,["opacity-0","transition-all"]),setTimeout(()=>{s.addClass(this._elem,["opacity-100"])},100),this._bindEvent()}_bindEvent(){}onHide(){this.dismiss.hide()}clearItem(){async function t(){const e=i=>new Promise(n=>{setTimeout(n,i)});await e(5e3),this.dismiss.hide(),await e(2e3),this._elem.remove()}t.bind(this)()}}class m{constructor(t,e){if(t.dataset.toastInit)return m.instances[t.dataset.toastInit];this.options=e,this.trigger=t,this.toastItems=[],this._init(),this.id=`toast-${Date.now()}`,t.dataset.toastInit=this.id,m.instances[this.id]=this}static instances={};_init(){this.toastContainer=document.createElement("div"),s.addClass(this.toastContainer,["toast-container"]),s.setPosition(this.toastContainer,this.options.placement,["toast-container"]),document.body.appendChild(this.toastContainer)}_bindEvent(){this.onevent(this.trigger,"click",this.pushItem),this.clearItem()}pushItem(){let t=new g(this.options);this.toastItems.push(t),this.toastContainer.appendChild(t._elem)}clearItem(){this.toastItems.shift()}}class v extends c{constructor(t,e){let{backdrop:i,backdropClasses:n,closable:o}=e,r={backdrop:i||"static",backdropClasses:"backdrop "+n,closable:o||!1};super(t,e.theme),this.UIType="ModalMsg",this._base=new p(t,e),this.modal=new b(t,r),this._init()}_init(){this.appendElem(this._elem),this.onShow(),this._bindEvent(),s.setAttribute(this._elem,"notifymodal")}onShow(){this.modal.show(),s.removeClass(this._elem,["flex"])}onHide(){this.modal.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class w extends c{constructor(t,e,i){let{triggerType:n,offset:o}=i,r={triggerType:n||"click",offset:o||10};super(t,i.theme||"light"),this.UIType="PopoverMsg",this._options={...i,...r},this._base=new p(t,i),this.popover=new f(t,e,r),this.bindHandler=this.onHide.bind(this),this._init()}_init(){this.appendElem(this._elem),s.setAttribute(this._elem,"notifypopover"),this.onShow(),this._bindEvent()}get config(){return this._options}onShow(){this.popover.show()}onHide(){this.popover.hide()}_bindEvent(){let{handler:t}=this._base.confirm;this._base.confirmBtn&&(this.onevent(this._base.confirmBtn,"click",this.onHide.bind(this)),t&&this.onevent(this._base.confirmBtn,"click",t.bind(this)),this._base.cancelBtn&&this.onevent(this._base.cancelBtn,"click",this.onHide.bind(this)))}}class C extends c{constructor(t,e){let{countdown:i}=e;super(t,e.theme||"light"),this.UIType="DefaultMsg",this._options={...this.config,countdown:i},this._base=new p(t,e),this._init()}get config(){return{countdown:1e3}}_init(){this.appendElem(this._elem),s.setAttribute(this._elem,"notifymsg"),this._bindEvent(this._options.countdown)}_bindEvent(t){async function e(){const i=n=>new Promise(o=>{setTimeout(o,n)});await i(t),s.addClass(this._elem,["opacity-0"]),await i(1e3),this._elem.remove()}e.bind(this)()}}window.Notification=h;export{h as N};
