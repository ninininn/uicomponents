import{B as r,d as p,U as a}from"./Utils-D4AxMvsK.js";class u extends r{constructor(...e){const{element:i,options:t}=p(e,"input");let s=null,l=null,h=null,n=null;switch(n=i.parentNode,i?.nodeName){case"INPUT":s=i;break;case"LABEL":l=i,s=l.querySelector("input")||document.createElement("input");break;default:h=i,s=h.querySelector("input")||document.createElement("input");break}const o=t.disabled?"#808080":t.theme||"var(--color-yellow-500)";super(s,o),this.UItype="Checkbox",this.options={...this._defaultOptions,...t},this.defaultTheme=t.theme||o,this.inputValue=this._defineInputValue(this.options.style,this.options.title,this.options.value).inputValue,this.label=this._createLabelGroup(l,this.options?.style),this.name=this._elem.name||this.options.name||null,this.container=this._createContainerGroup(h,this.label),this.originParent=n,n&&n.appendChild(this.container),this.activeImg=this._toggleImg(this.options.style,this.options.checked),this.options.handlers&&(this.handlers=this.options.handlers),this.onChange=this._onChange.bind(this),this._init()}get _defaultOptions(){return{style:"default",title:"",value:"",checked:!0,theme:"var(--color-yellow-500)",checkImg:null,classes:["checkbox"],disabled:!1}}_init(){this.render(),this._bindEvents()}render(){switch(this._elem.type="checkbox",this._elem.checked=this.options.checked,this._elem.value=this.inputValue,a.addClass(this._elem,this.options.classes),a.setAttribute(this._elem,"checkstyle",this.options.style||"default"),a.setProperty(this.label,"--themeColor",this._theme),this.options.style){case"switch":a.addClass(this.label,["label"]);let e=document.createTextNode(this._defineInputValue(this.options.style,this.options.title,this.options.value).displayText);this.label.replaceChild(e,this.label.childNodes[1]);break;case"toggle":a.setProperty(this.label,"--toggle-img",`url(${this.activeImg})`);break;case"tag":a.addClass(this.label,["input-label","input-tag-group"]),a.addClass(this._elem,["tag-input"]);break}this.options.disabled?(a.addClass(this._elem,["disabled"]),this._elem.setAttribute("disabled",!0)):(a.removeClass(this._elem,["disabled"]),this._elem.removeAttribute("disabled"))}_createLabelGroup(e,i){let t=e||document.createElement("label");const s=i||"default";if(t.appendChild(this._elem),this.options.title&&s!=="toggle"){let l=document.createTextNode(this.options.title);t.appendChild(l)}return t}_createContainerGroup(e,i){return e?(e.appendChild(i),e):i}_toggleImg(e,i){if(e!=="toggle")return;let t=i?0:1;return this.options.checkImg[t]}_defineInputValue(e,i,t){let s=i,l=t||i,h=this.options.checked?0:1;if(e==="switch"){const n=i.trim().split("|"),o=t?t.trim().split("|"):n;console.log(o),s=n[h]||s||"",l=o[h]||s||" "}else l=this.options.checked?l:"";return{displayText:s,inputValue:l}}getChecked(){return this.options.checked}setChecked(e){this.options.checked=e,this._applyUpdate()}getValue(){return this.inputValue}setValue(e){this.inputValue=e,this._applyUpdate()}changeTheme(e){if(this.options.disabled){console.error("請將disabled設定為false");return}super.setTheme(e),this._applyUpdate()}setDisabled(e){this.options.disabled=e,this._applyUpdate()}_onChange(e){this.options.checked=e.target.checked,this.handlers&&this.handlers(this.options.checked),this._applyUpdate()}_bindEvents(){this.onevent(this._elem,"change",this.onChange)}_applyUpdate(){this._elem.checked=this.options.checked,this._elem.value=this.inputValue,this._elem.disabled=this.options.disabled,this.options.style==="toggle"&&(this.activeImg=this._toggleImg("toggle",this.options.checked)),this.inputValue=this._defineInputValue(this.options.style,this.options.title,this.options.value).inputValue,this.render()}}class m extends r{constructor(e,i){let t=i||document.createElement("ul");super(t),this.UItype="CheckboxGroup",this.groupContainer=this._elem,this.groupName=e,this.items=[],this._init()}_init(){this.render()}render(){this.groupContainer.className="checkbox-group w-full grid grid-cols-2"}getValue(e){if(e){let i={};for(let t of this.items){if(!t.name||t.name!==e)break;i.name=t.name,i.value=t.getValue()}return i}else{let i=[];for(let t of this.items){let s={};s.name=t.name,s.value=t.getValue(),i.push(s)}return i}}addCheckItems(e){if(Array.isArray(e)){this.items=[...this.items,...e];for(let t of e){let s=document.createElement("li");s.classList.add("item"),s.appendChild(t.container),this._elem.appendChild(s)}}else{this.items=[...this.items,e];let t=document.createElement("li");t.classList.add("item"),t.appendChild(e.container),this._elem.appendChild(t)}}}export{u as C,m as a};
