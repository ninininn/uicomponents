import{B as p,U as n,f as H}from"./Utils-C1LUlqXq.js";import{C}from"./Checkbox-LWR6MQMB.js";import{D as v}from"./Dropdown-BFbw9Seo.js";/* empty css                 */import I from"./TableAPIdoc-RcHpK-LF.js";import{N as L}from"./Notification-CyWVO7vM.js";import"./iframe-DRkchdRO.js";import"./preload-helper-DLLWEBaG.js";import"./index-ksVrQ76b.js";const N="index",w="rowselected",T="field",x="sort",u=[10,20,25,50,100];var F={id:"",container:null,limits:u[2],name:"defaultTable",classes:["table-container"],cols:[],selection:"checkbox",tools:["group","exports","print"]},E={field:void 0,title:void 0,align:"left",fixed:!1,sort:void 0,template:void 0,visible:!0};let k=class extends p{constructor(e={},t){let s=document.createElement("div");const a=document.createElement("table");s.appendChild(a);//!把初始設定值定義好-cols
let i=e.cols;e.cols=i.map(c=>Object.assign({},E,c)),super(s,e.theme="var(--color-primary-500)"),this.UItype="Table",this.id=e.id,this._config=Object.assign(F,e),this.table=a,this.tableBody=document.createElement("tbody"),this.tableHeader=new V(this);let l=this.config.cols.length;this.skeleton=new Z({type:"table",colNum:this.config.selection?l+1:l}),this.data=t,this.dataCounts=this.data?.length||0,this._createPagination(),this._init()}get config(){return this._config}get cacheKey(){return this.UItype+"-"+this.id}async pullData(e){return await fetch(e)}_init(){this.config.tools&&this._createToolBar(this.config.tools),this._render(),this._bindEvent()}_render(){super.setTheme(this.config.theme),n.setProperty(this._elem,"--theme",this._theme),this.dataCounts<1?(this.tableBody.appendChild(this.skeleton.getElem()),this.skeleton.show()):this.skeleton.hide(),!this.data&&this.config.url&&this.pullData(this.config.url).then(t=>t.json()).then(t=>{this.setData(t),this.skeleton.hide()}),this.table.id=this.id,this.table.appendChild(this.tableHeader.getElem()),this.table.appendChild(this.tableBody),n.addClass(this.table,["table"]),n.addClass(this._elem,this.config.classes);let e=H(this.config.container);e||(e=document.createElement("div")),this.tools&&e.appendChild(this.tools),e.appendChild(this.getElem()),this._elem.after(this._pagination.getElem())}_bindEvent(){this.onevent(this.tableBody,"click",(function(e){console.log("check rows state in this page"),parseInt(e.target.closest("tr[data-index]").dataset.index)}).bind(this))}_createToolBar(e){let t=document.createElement("div");for(let s of e){let a,i;switch(s){case"group":let l=document.createElement("div");n.addClass(l,["tools-popover"]),l.addEventListener("click",r=>{r.stopImmediatePropagation(),r.target.getAttribute("name")});let c=this.config.cols;for(let r of c){console.log(r);let d=new C({theme:this._theme,checked:r.visible,title:r.title,handlers:h=>{r.visible=h,this.tableHeader._updateCol(`${r.field}`,r)}});l.appendChild(d.container)}a=n.setButtons({classes:["btn-sm","outline-btn","relative"],icon:"/public/filter.svg",handler:r=>{r.stopImmediatePropagation(),r.target===a&&n.toggleClass(l,["visible"])}}),t.appendChild(l);break;case"exports":i=()=>{},a=n.setButtons({classes:["btn-sm","outline-btn"],icon:"/public/export.svg",handler:i});break;case"print":i=()=>{},a=n.setButtons({classes:["btn-sm","outline-btn"],icon:"/public/print.svg",handler:i});break;default:t.appendChild(n.setButtons(s));break}t.appendChild(a)}n.addClass(t,["table-tools"]),this.tools=t}_createRows(e,t="checkbox"){let s=this;return e.map((i,l)=>{let c={data:i,index:++l,selection:t,table:s};return new M(c)})}_updateRows(){this.tableRows=this._createRows(this.data)}_rowSort(e,t){switch(e){case"asc":this.data.sort((s,a)=>s[t]-a[t]);break;case"dec":this.data.sort((s,a)=>a[t]-s[t]);break}this._updateRows(),this._showRows()}_checkRowState(){//! 如果有任何一row取消選取，也要改變header狀態
let e=this.getCurrentPage()*this.config.limits;return this.tableRows.filter(s=>s.index<=e&&s.index>e-this.config.limits).every(s=>s.selection.getChecked())}_showRows(){const e=this.getCurrentData();let t=this._createRows(e),s=document.createDocumentFragment();for(let i of t)s.appendChild(i.getElem());let a=this.tableBody.querySelectorAll("tr[data-index]");for(let i of a)i.remove();this.tableBody.appendChild(s),this._elem.scrollTop=0}setSize(e,t="auto"){n.setStyle(this._elem,"width",`${e}px`),n.setStyle(this._elem,"height",`${t}px`)}getTableData(){return this.tableRows?this.data:(console.error("No Data Yet!"),this.tableRows)}getSelectedRows(){return this.tableRows.filter(t=>t.selection.getChecked())}getFiltedRows(e){return this.tableRows.filter(e)}setData(e){return this.data=e,this.dataCounts=this.data.length,this._pagination.renderPage(this.dataCounts),this._showRows(),this._updateRows(),this._render(),this}selectedFullPage(e=this.getCurrentPage(),t=!0){return e*this.config.limits,this}_createPagination(){this._pagination=new q({theme:this._theme,currentPage:1,pageSize:this.config.limits,total:this.dataCounts,controlPage:this.config.controlPage,handler:({page:e,size:t})=>{this.config.limits=t,this._showRows(),console.log("目前selected的row:",this.getSelectedRows())}})}getCurrentData(){const t=(this.getCurrentPage()-1)*this.config.limits,s=t+this.config.limits;return this.data.slice(t,s)}getCurrentPage(){return this._pagination.currentPage}clearSelected(){let e=this._pagination.total;for(let t=1;t<=e;t++)this.selectedFullPage(t,!1);this.tableHeader.selection.setChecked(!1),this.tableRows.forEach(t=>{t.selection.setChecked(!1),t._render()})}};class V extends p{constructor(e){const{cols:t,selection:s,theme:a}=e.config,i=document.createElement("thead"),l=document.createElement("tr");i.appendChild(l),super(i,a),this.UItype="TableHeader",this.table=e,this.cols=t,this.selection=this._checkSelection(s),this._init()}_init(){if(this.selection.UItype==="Checkbox"){const e=document.createElement("th");e.appendChild(this.selection.getElem()),this._elem.querySelector("tr").appendChild(e)}this._elem.querySelector("tr").appendChild(this._createHead()),this._bindEvent()}_bindEvent(){function e(t){if(t.stopPropagation(),t.currentTarget.dataset.sort){let s=t.currentTarget.dataset.sort==="asc"?"dec":"asc";this.table._rowSort(s,t.currentTarget.dataset.field),n.setAttribute(t.currentTarget,x,s)}}this.cols.some(t=>t.sort)&&this.getElem().querySelectorAll("[data-sort]").forEach(t=>{this.onevent(t,"click",e.bind(this))})}_render(){document.createDocumentFragment();//!把節點放到新的片段中組裝
const e=document.createDocumentFragment();this.selection.UItype==="Checkbox"&&e.appendChild(this.getElem().querySelector("th"));const t=this.getElem().querySelectorAll("th");Array.from(t).map(s=>s.dataset.field);for(let s=0;s<this.cols.length;s++)this.cols[s].visible;this._elem.querySelector("tr").appendChild(e)}_createHead(){const e=document.createDocumentFragment();for(let t of this.cols){if(!t.visible)continue;let s=this._createCol(t);e.appendChild(s)}return e}_createCol(e){let{field:t,title:s,sort:a,visible:i}=e;if(!i)return;let l=document.createElement("th"),c=document.createElement("span");return n.setAttribute(l,T,t),n.setText(c,s),a&&(n.setAttribute(l,x,a),c.innerHTML+=`<svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14 17.25C14.4142 17.25 14.75 17.5858 14.75 18C14.75 18.4142 14.4142 18.75 14 18.75H11C10.5858 18.75 10.25 18.4142 10.25 18C10.25 17.5858 10.5858 17.25 11 17.25H14ZM16 13.25C16.4142 13.25 16.75 13.5858 16.75 14C16.75 14.4142 16.4142 14.75 16 14.75H11C10.5858 14.75 10.25 14.4142 10.25 14C10.25 13.5858 10.5858 13.25 11 13.25H16ZM18 9.25C18.4142 9.25 18.75 9.58579 18.75 10C18.75 10.4142 18.4142 10.75 18 10.75H11C10.5858 10.75 10.25 10.4142 10.25 10C10.25 9.58579 10.5858 9.25 11 9.25H18ZM21 5.25C21.4142 5.25 21.75 5.58579 21.75 6C21.75 6.41421 21.4142 6.75 21 6.75H11C10.5858 6.75 10.25 6.41421 10.25 6C10.25 5.58579 10.5858 5.25 11 5.25H21Z" fill="currentColor"/>
<path d="M4.24999 10.7617V15C4.24999 15.4142 4.58578 15.75 4.99999 15.75C5.4142 15.75 5.74999 15.4142 5.74999 15V10.7617C5.83248 10.875 5.9131 10.9879 5.9912 11.0967L5.9958 11.1031C6.1467 11.3133 6.30972 11.5404 6.43847 11.6855C6.71335 11.9954 7.18818 12.0239 7.49804 11.749C7.80761 11.4742 7.83604 11.0002 7.56151 10.6904C7.49513 10.6156 7.38199 10.4613 7.20995 10.2217L7.19283 10.1978C7.0366 9.98019 6.84876 9.71852 6.65526 9.46875C6.45751 9.2135 6.23286 8.94285 6.00487 8.73047C5.89083 8.62424 5.75714 8.51521 5.60937 8.42871C5.46887 8.34647 5.25683 8.25 4.99999 8.25C4.74316 8.25 4.53111 8.34647 4.39062 8.42871C4.24284 8.51521 4.10915 8.62424 3.99511 8.73047C3.76712 8.94285 3.54247 9.2135 3.34472 9.46875C3.14409 9.72771 2.94956 9.99947 2.79003 10.2217C2.61799 10.4613 2.50485 10.6156 2.43847 10.6904C2.16394 11.0002 2.19237 11.4742 2.50194 11.749C2.8118 12.0239 3.28663 11.9954 3.56151 11.6855C3.69026 11.5403 3.85328 11.3133 4.00418 11.1031L4.00878 11.0967C4.08689 10.9879 4.1675 10.875 4.24999 10.7617Z" fill="currentColor"/>
</svg>
`),l.appendChild(c),l}_checkSelection(e){let t=document.createElement("th");if(e==="checkbox")return new C(t,{theme:this._theme,checked:!1,handlers:a=>{this.table.getCurrentRows().forEach(l=>{l.selection.setChecked(a),l._render()})}});if(e==="radio")return}_updateCol(e,t){this.cols=this.cols.map(s=>s.field===e?{...s,...t}:s),this._render();//!重新依據資料showRows
this.table._showRows()}}class M extends p{constructor({data:e,index:t,selection:s="checkbox",table:a}){const i=document.createElement("tr");super(i,a._theme),this.UItype="TableRow",this.data=e,this.selection=this._checkSelection(s),this.cells=this._setTableCells(this.data,a.config.cols),this.index=t,this._init()}_init(){let e=document.createDocumentFragment();this.selection&&e.appendChild(this.selection.container);for(let t of this.cells)t.config.visible&&e.appendChild(t.getElem());this._elem.appendChild(e),n.setAttribute(this._elem,N,this.index),this._render(),this._bindEvent()}_render(){this.selection.getChecked()?n.setAttribute(this._elem,w):delete this._elem.dataset[w]}_bindEvent(){function e(t){let s=this.selection.getChecked();this.selection.setChecked(!s),this._render()}this.selection&&this.onevent(this.getElem(),"click",e.bind(this))}_checkSelection(e){let t=document.createElement("td");if(e==="checkbox")return new C(t,{checked:!1,theme:this._theme});if(e==="radio")return}_setTableCells(e,t){return t.map(a=>{const i=e[a.field];return new O(i||e,a)})}}class O extends p{constructor(e,t){const s=document.createElement("td");super(s),this.UItype="TableCell",this.dataValue=e,this.config=Object.assign({},E,t),this._init()}_init(){let{field:e,align:t="left",template:s,fixed:a,visible:i}=this.config;if(!i)return;let l=document.createElement("span");switch(t){case"center":n.addClass(this._elem,["text-center"]);break;case"right":n.addClass(this._elem,["text-right"]);break;default:n.clearClass(this._elem);break}n.setAttribute(this._elem,T,e),(typeof this.dataValue=="string"||typeof this.dataValue=="number")&&n.setText(l,this.dataValue),this._elem.appendChild(l),s&&s.bind(this,this.dataValue)()}_render(){}}//! 未來要獨自拆出檔案
const U="currentPage",j="prev",z="next";var $={jump:!0,initCurrentPage:1,pageSize:u[1],total:0,controlPage:!1};class q extends p{constructor(e){const t=document.createElement("div");n.addClass(t,["pagination"]),super(t,e.theme="var(--color-primary-500)"),this.UItype="Pagination",this._config=Object.assign($,e),this.currentPage=e.currentPage||1,this.total=Math.ceil(this.config.total/this.config.pageSize)||0,this.pages=this._createPages(this.total,this.currentPage),this.handler=e.handler,this._init()}get config(){return this._config}_init(){this._render(),this._bindEvent()}_render(){this._elem.innerHTML="",super.setTheme(this._theme),n.setProperty(this._elem,"--theme",this._theme);let e=document.createDocumentFragment();for(let t=0;t<this.pages.length;t++){let s=document.createElement("button");switch(s.type="button",this.pages[t].current&&n.setAttribute(s,U),n.addClass(s,["page-item"]),this.pages[t].type){case"prev-page":n.setText(s,"<<"),n.setAttribute(s,j);break;case"next-page":n.setText(s,">>"),n.setAttribute(s,z);break;case"start-ellipsis":n.setText(s,"..."),s.disabled=!0;break;case"end-ellipsis":n.setText(s,"..."),s.disabled=!0;break;default:n.setText(s,this.pages[t].page),s.dataset.page=this.pages[t].page;break}(this.pages[t].page<1||this.pages[t].page>this.total)&&(this.pages[t].page=this.currentPage,s.disabled=!0),e.appendChild(s)}this._elem.appendChild(e),this.config.jump&&this._createJumpCompo(),this.config.controlPage&&this._createPageControl()}_bindEvent(){function e(t){if(t.stopPropagation(),!t.target.classList.contains("page-item"))return;let s=Number(t.target.dataset.page);s||(s=t.target.hasAttribute("data-prev")?this.currentPage-1:t.target.hasAttribute("data-next")?this.currentPage+1:this.currentPage),this.goPage(s),this.handler({page:s,size:this.config.pageSize})}super.onevent(this._elem,"click",e.bind(this))}_createPages(e,t){let s=[],a=this.config.pageSize,i={type:"prev-page",page:this.currentPage-1,current:!1},l={type:"next-page",page:this.currentPage+1,current:!1};for(let r=1;r<=e;r++){let d;r===1||r===t||r===e||r===t+1||r===t-1?d="page":r<=t+a?d="start-ellipsis":r>=t+a&&(d="end-ellipsis");let h={type:d||"page",page:r,current:r===t};s.push(h)}let c=s.filter((r,d)=>{const{type:h}=r;return!(h==="start-ellipsis"&&s[d+1].type==="start-ellipsis"||h==="end-ellipsis"&&s[d+1].type==="end-ellipsis"||h==="start-ellipsis"&&s[d+1].type==="end-ellipsis")});return[i,...c,l]}_createJumpCompo(){if(this.total<=0)return;let e=document.createElement("div");n.addClass(e,["pagination-jump"]);let t=[];for(let i=1;i<=this.total;i++){let l={value:i,text:i};i===this.currentPage&&(l.selected=!0),t.push(l)}let s=new v("jump-dropdown",t,{filter:!0,filterHandler:function(){let l=this.value;this.parentNode.parentNode.querySelectorAll(".dropdown-item li").forEach(r=>{r.textContent.includes(l)?r.classList.remove("hidden"):r.classList.add("hidden")})}},(function(i){let l=Number(i.target.value);this.goPage(l),this.handler({page:l,size:this.config.pageSize})}).bind(this)),a=document.createDocumentFragment();a.appendChild(document.createTextNode("前往第")),a.appendChild(s.containerEl),a.appendChild(document.createTextNode(`/${this.total} 頁`)),e.appendChild(a),this._elem.appendChild(e)}_createPageControl(){let e=document.createElement("div");n.addClass(e,["pagination-jump"]);let t=[];for(let i=0;i<u.length;i++){let l={value:u[i],text:`${u[i]}條`};u[i]===this.config.pageSize&&(l.selected=!0),t.push(l)}let s=new v("table-page-dropdown",t,null,(function(i){let l=Number(i.target.value);this._config.pageSize=l,this.renderPage(this._config.total),this.goPage(1),this.handler({page:1,size:l})}).bind(this)),a=document.createDocumentFragment();a.appendChild(document.createTextNode("每頁顯示")),a.appendChild(s.containerEl),a.appendChild(document.createTextNode(" / 頁")),e.appendChild(a),this._elem.appendChild(e)}renderPage(e){this._config={...this.config,total:e},this.total=Math.ceil(e/this._config.pageSize),this.pages=this._createPages(this.total,this.currentPage),this._render()}setCurrentPage(e){this.currentPage=e,this.pages=this._createPages(this.total,this.currentPage),this._config={...this.config,currentPage:e}}goPage(e){console.log(`go ${e} page`),!(e<1||e>this.total)&&(this.setCurrentPage(e),this._render())}}//! 未來要獨自拆出檔案
class Z extends p{constructor(e){let t;switch(e.type){case"table":t=document.createElement("tr");break;case"text":break;case"img":break;default:t=document.createElement("div")}super(t),this.UItype="Skeleton",this.options=e,this._render()}_render(){n.addClass(this._elem,["skeleton"]),this.defineType(this.options.type,this.options?.colNum)}defineType(e,t){switch(n.clearClass(this._elem,["skeleton"]),e){case"table":n.addClass(this._elem,["table-skeleton"]),this._elem.innerHTML=`
          <td colspan='${t}' class="shadow-sm animate-pulse">
              <div class="flex items-center justify-between">
                  <div>
                      <div class="h-2.5 bg-gray-300 rounded-full w-24 mb-2.5"></div>
                      <div class="w-32 h-2 bg-gray-200 rounded-full"></div>
                  </div>
                  <div class="h-2.5 bg-gray-300 rounded-full w-12"></div>
              </div>
              <div class="flex items-center justify-between pt-4">
                  <div>
                      <div class="h-2.5 bg-gray-300 rounded-full w-24 mb-2.5"></div>
                      <div class="w-32 h-2 bg-gray-200 rounded-full"></div>
                  </div>
                  <div class="h-2.5 bg-gray-300 rounded-full w-12"></div>
              </div>
              <div class="flex items-center justify-between pt-4">
                  <div>
                      <div class="h-2.5 bg-gray-300 rounded-full w-24 mb-2.5"></div>
                      <div class="w-32 h-2 bg-gray-200 rounded-full"></div>
                  </div>
                  <div class="h-2.5 bg-gray-300 rounded-full w-12"></div>
              </div>
              <span class="sr-only">Loading...</span>
          </td>`;break;case"text":n.addClass(this._elem,["text-skeleton"]),this._elem.innerHTML=`
          <div role="status" class="max-w-sm animate-pulse">
              <div class="h-2.5 bg-gray-200 rounded-full w-48 mb-4"></div>
              <div class="h-2 bg-gray-200 rounded-full max-w-[360px] mb-2.5"></div>
              <div class="h-2 bg-gray-200 rounded-full mb-2.5"></div>
              <div class="h-2 bg-gray-200 rounded-full max-w-[330px] mb-2.5"></div>
              <div class="h-2 bg-gray-200 rounded-full max-w-[300px] mb-2.5"></div>
              <div class="h-2 bg-gray-200 rounded-full max-w-[360px]"></div>
              <span class="sr-only">Loading...</span>
          </div>`;break;case"img":n.addClass(this._elem,["img-skeleton"]),this._elem.innerHTML=`
          <div role="status" class="flex items-center justify-center h-56 max-w-sm bg-gray-300 rounded-lg animate-pulse">
              <svg class="w-10 h-10 text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
              <path d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"/>
              <path d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM9 13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2Zm4 .382a1 1 0 0 1-1.447.894L10 13v-2l1.553-1.276a1 1 0 0 1 1.447.894v2.764Z"/>
            </svg>
              <span class="sr-only">Loading...</span>
          </div>`;break}}show(){n.removeClass(this._elem,["hidden"])}hide(){n.addClass(this._elem,["hidden"])}}window.Table=k;const G=({id:o,name:e,limits:t,selection:s,container:a,cols:i,tools:l,groupTool:c,exportsTool:r,printTool:d,theme:h,classes:P,complete:R,error:A,handler:D})=>{let g=document.createElement("div");g.className="mx-auto grid place-items-center";let m=document.createElement("button");m.className="btn btn-secondary mb-3",m.textContent="create Table";let f=document.createElement("button");f.className="btn btn-danger outline-btn mb-3",f.textContent="clear Selected";let _=document.createElement("div");_.className="table-test-target",g.appendChild(m),g.appendChild(_),g.appendChild(f);let S=[c="group",r="exports",d="print"],B={id:o,name:e,limits:t,container:a||".table-test-target",cols:i,tools:l?[...S]:!1,selection:s,theme:h,classes:P,complete:R,error:A,handler:D,url:"https://jsonplaceholder.typicode.com/comments",controlPage:!0};return m.addEventListener("click",()=>{let y=new k(B);console.log("table_instance:",y),f.addEventListener("click",()=>{y.clearSelected()})}),g},{fn:ie,expect:ne}=__STORYBOOK_MODULE_TEST__,{action:le}=__STORYBOOK_MODULE_ACTIONS__,re={title:"Components/Table",tags:["autodocs"],parameters:{docs:{source:{format:!0,language:"html"},page:I}},render:({...o})=>G({...o}),argTypes:{id:{control:"text",type:{required:!0},description:"表格元素id",table:{category:"configurations",type:{summary:"string"}}},name:{control:"text",description:"Table name",table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"string"}}},limits:{control:"select",options:[10,20,25,50,100],description:"每頁顯示的最多筆數",table:{category:"configurations",defaultValue:{summary:"25"},type:{summary:"number"}}},container:{control:"text",description:"要放入的DOM元素",table:{category:"configurations",defaultValue:{summary:"null"},type:{summary:"string"}}},cols:{control:"array",description:"欄位設定及帶入值",table:{category:"configurations",defaultValue:{summary:"-"},type:{summary:"array"}}},selection:{control:"select",options:["checkbox","radio"],description:"是否要有勾選功能",table:{category:"configurations",defaultValue:{summary:"checkbox"},type:{summary:"string"}}},tools:{control:"boolean",description:"是否要有基本工具列",table:{category:"configurations",defaultValue:{summary:"true"},type:{summary:"boolean"}}},groupTool:{control:"boolean",if:{arg:"tools",truthy:!0},description:"群組篩選工具",table:{category:"configurations",subcategory:"tools feature",defaultValue:{summary:"true"},type:{summary:"boolean"}}},exportsTool:{control:"boolean",if:{arg:"tools",truthy:!0},description:"匯出工具",table:{category:"configurations",subcategory:"tools feature",defaultValue:{summary:"true"},type:{summary:"boolean"}}},printTool:{control:"boolean",if:{arg:"tools",truthy:!0},description:"列印工具",table:{category:"configurations",subcategory:"tools feature",defaultValue:{summary:"true"},type:{summary:"boolean"}}},theme:{control:"color",description:"表格色系",table:{category:"configurations",defaultValue:{summary:"var(--color-primary-500)"},type:{summary:"string"}}},complete:{control:"function",description:"完成資料載入後要執行的函式",table:{category:"configurations",type:{summary:"function"}}},classes:{control:{type:"array"},description:"自定義class，每個class以tailwindcss property放入",table:{category:"configurations",defaultValue:{summary:".table-container"},type:{summary:"array"}}},error:{control:{type:"function"},description:"資料載入失敗時要執行的函式",table:{category:"configurations",type:{summary:"function"}}},handler:{action:"click",control:"function",description:"點擊觸發元素後的callback函式",table:{category:"configurations",defaultValue:{summary:"null"},type:{summary:"function"}}}},args:{id:"table_first",classes:["table-container"],limits:25,selection:"checkbox",tools:!0,theme:"var(--color-primary-500)",groupTool:!0,exportsTool:!0,printTool:!0}},b={args:{id:"test-table",name:"測試表格",cols:[{field:"postId",title:"postId",sort:"asc",fixed:!1,align:"center",template:function(o){let e=`<div>${o}</div>`;this.getElem().innerHTML=e}},{field:"id",title:"id",sort:"dec",fixed:!1,align:"center",visible:!1},{field:"name",title:"名字",sort:!1,fixed:!1,align:"center"},{field:"email",title:"email",sort:!1,fixed:!0,align:"center"},{field:"body",title:"內容",sort:!1,fixed:!1},{field:"operate",title:"操作",sort:!1,fixed:!1,template:function(o){let e=[{classes:["btn-sm","btn-success"],text:"查看細節",handler:function(s){s.stopPropagation(),L.modal(this,{customContent:`<div>${JSON.stringify(o)}</div>`})}},{classes:["btn-sm","btn-danger"],text:"刪除此列",handler:function(s){s.stopPropagation(),console.log("btn handler get data:",o)}}],t=document.createElement("div");n.addClass(t,["flex","gap-2"]),n.setBtnGroup(e,t),this.getElem().appendChild(t)}}],limits:25,container:".table-test-target"}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    id: "test-table",
    name: "測試表格",
    cols: [{
      field: 'postId',
      title: 'postId',
      sort: 'asc',
      fixed: false,
      align: "center",
      template: function (data) {
        let template = \`<div>\${data}</div>\`;
        this.getElem().innerHTML = template;
      }
    }, {
      field: 'id',
      title: 'id',
      sort: 'dec',
      fixed: false,
      align: "center",
      visible: false
    }, {
      field: 'name',
      title: '名字',
      sort: false,
      fixed: false,
      align: "center"
    }, {
      field: 'email',
      title: 'email',
      sort: false,
      fixed: true,
      align: "center"
    }, {
      field: 'body',
      title: '內容',
      sort: false,
      fixed: false
    }, {
      field: 'operate',
      title: '操作',
      sort: false,
      fixed: false,
      template: function (data) {
        let buttons = [{
          classes: ["btn-sm", "btn-success"],
          text: "查看細節",
          handler: function (e) {
            e.stopPropagation(); //避免觸發選取該row
            Notification.modal(this, {
              customContent: \`<div>\${JSON.stringify(data)}</div>\`
            });
          }
        }, {
          classes: ["btn-sm", "btn-danger"],
          text: "刪除此列",
          handler: function (e) {
            e.stopPropagation(); //避免觸發選取該row
            console.log("btn handler get data:", data);
          }
        }];
        let btnContainer = document.createElement("div");
        UIUtils.addClass(btnContainer, ["flex", "gap-2"]);
        UIUtils.setBtnGroup(buttons, btnContainer);
        this.getElem().appendChild(btnContainer);
      }
    }],
    limits: 25,
    container: '.table-test-target'
  }
  // play: async ({ args, canvas, userEvent }) => {
  //   await userEvent.type(canvas.getByText('一般勾選框'), '勾選框');
  //   await userEvent.click(canvas.getByLabelText('一般勾選框'));
  //   await expect(args.handlers).toHaveBeenCalled();
  // }
}`,...b.parameters?.docs?.source}}};const oe=["Table"];export{b as Table,oe as __namedExportsOrder,re as default};
